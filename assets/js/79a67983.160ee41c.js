"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6354],{3905:(t,n,e)=>{e.d(n,{Zo:()=>s,kt:()=>u});var r=e(7294);function i(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function c(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function o(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?c(Object(e),!0).forEach((function(n){i(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function a(t,n){if(null==t)return{};var e,r,i=function(t,n){if(null==t)return{};var e,r,i={},c=Object.keys(t);for(r=0;r<c.length;r++)e=c[r],n.indexOf(e)>=0||(i[e]=t[e]);return i}(t,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)e=c[r],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(i[e]=t[e])}return i}var l=r.createContext({}),m=function(t){var n=r.useContext(l),e=n;return t&&(e="function"==typeof t?t(n):o(o({},n),t)),e},s=function(t){var n=m(t.components);return r.createElement(l.Provider,{value:n},t.children)},h="mdxType",g={inlineCode:"code",wrapper:function(t){var n=t.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(t,n){var e=t.components,i=t.mdxType,c=t.originalType,l=t.parentName,s=a(t,["components","mdxType","originalType","parentName"]),h=m(e),p=i,u=h["".concat(l,".").concat(p)]||h[p]||g[p]||c;return e?r.createElement(u,o(o({ref:n},s),{},{components:e})):r.createElement(u,o({ref:n},s))}));function u(t,n){var e=arguments,i=n&&n.mdxType;if("string"==typeof t||i){var c=e.length,o=new Array(c);o[0]=p;var a={};for(var l in n)hasOwnProperty.call(n,l)&&(a[l]=n[l]);a.originalType=t,a[h]="string"==typeof t?t:i,o[1]=a;for(var m=2;m<c;m++)o[m]=e[m];return r.createElement.apply(null,o)}return r.createElement.apply(null,e)}p.displayName="MDXCreateElement"},9970:(t,n,e)=>{e.r(n),e.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>g,frontMatter:()=>c,metadata:()=>a,toc:()=>m});var r=e(7462),i=(e(7294),e(3905));const c={title:"Callbacks in Node.js"},o=void 0,a={unversionedId:"programming/nodejs/callback",id:"programming/nodejs/callback",title:"Callbacks in Node.js",description:"Concept",source:"@site/docs/programming/nodejs/callback.md",sourceDirName:"programming/nodejs",slug:"/programming/nodejs/callback",permalink:"/docs/programming/nodejs/callback",draft:!1,tags:[],version:"current",frontMatter:{title:"Callbacks in Node.js"},sidebar:"programming",previous:{title:"Process and Thread",permalink:"/docs/programming/nodejs/process-thread"},next:{title:"Copy in JavaScript",permalink:"/docs/programming/nodejs/copy"}},l={},m=[{value:"Concept",id:"concept",level:2},{value:"Promise",id:"promise",level:2},{value:"C\xe1c lo\u1ea1i Promise kh\xe1c",id:"c\xe1c-lo\u1ea1i-promise-kh\xe1c",level:3},{value:"Async/Await",id:"asyncawait",level:2}],s={toc:m},h="wrapper";function g(t){let{components:n,...e}=t;return(0,i.kt)(h,(0,r.Z)({},s,e,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"concept"},"Concept"),(0,i.kt)("p",null,'Callback l\xe0 m\u1ed9t kh\xe1i ni\u1ec7m c\u01a1 b\u1ea3n trong l\u1eadp tr\xecnh b\u1ea5t \u0111\u1ed3ng b\u1ed9 trong Node.js. Ch\xfang cho ph\xe9p th\u1ef1c hi\u1ec7n c\xe1c ho\u1ea1t \u0111\u1ed9ng kh\xf4ng ch\u1eb7n, c\xf3 th\u1ec3 c\u1ea3i thi\u1ec7n \u0111\xe1ng k\u1ec3 hi\u1ec7u su\u1ea5t cho c\xe1c nhi\u1ec7m v\u1ee5 li\xean quan \u0111\u1ebfn I/O. Tuy nhi\xean, do s\u1ef1 l\u1ed3ng gh\xe9p ti\u1ec1m n\u0103ng c\u1ee7a callback, vi\u1ec7c nh\u1eadn th\u1ee9c v\xe0 qu\u1ea3n l\xfd "callback hell" l\xe0 r\u1ea5t quan tr\u1ecdng, s\u1eed d\u1ee5ng c\xe1c m\u1eabu ho\u1eb7c c\xe1c t\xednh n\u0103ng ng\xf4n ng\u1eef m\u1edbi \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o m\xe3 c\xf3 th\u1ec3 b\u1ea3o tr\xec v\xe0 d\u1ec5 \u0111\u1ecdc.'),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/quankori/quankori.github.io/master/src/images/programming/7.png",alt:"Image"})),(0,i.kt)("h2",{id:"promise"},"Promise"),(0,i.kt)("p",null,"M\u1ed9t Promise trong JavaScript \u0111\u1ea1i di\u1ec7n cho m\u1ed9t gi\xe1 tr\u1ecb c\xf3 th\u1ec3 c\xf3 s\u1eb5n ngay b\xe2y gi\u1edd, trong t\u01b0\u01a1ng lai ho\u1eb7c kh\xf4ng bao gi\u1edd. N\xf3 cho ph\xe9p b\u1ea1n vi\u1ebft m\xe3 b\u1ea5t \u0111\u1ed3ng b\u1ed9 theo m\u1ed9t c\xe1ch \u0111\u1ed3ng b\u1ed9 h\u01a1n. Promise c\xf3 ba tr\u1ea1ng th\xe1i:"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Pending"),": Tr\u1ea1ng th\xe1i ban \u0111\u1ea7u; promise ch\u01b0a \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n ho\u1eb7c b\u1ecb t\u1eeb ch\u1ed1i."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Fulfilled"),": Ho\u1ea1t \u0111\u1ed9ng \u0111\xe3 \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n th\xe0nh c\xf4ng."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Rejected"),": Ho\u1ea1t \u0111\u1ed9ng th\u1ea5t b\u1ea1i"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'const myPromise = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve("Promise resolved");\n  }, 2000);\n});\n\nmyPromise.then((result) => {\n  console.log(result); // "Promise resolved"\n});\n')),(0,i.kt)("h3",{id:"c\xe1c-lo\u1ea1i-promise-kh\xe1c"},"C\xe1c lo\u1ea1i Promise kh\xe1c"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Promise.race")," v\xe0 ",(0,i.kt)("inlineCode",{parentName:"p"},"Promise.any")," c\xf9ng l\xe0 c\xe1c ph\u01b0\u01a1ng th\u1ee9c c\u1ee7a \u0111\u1ed1i t\u01b0\u1ee3ng Promise trong JavaScript, nh\u01b0ng ch\xfang c\xf3 m\u1ee5c \u0111\xedch v\xe0 c\xe1ch ho\u1ea1t \u0111\u1ed9ng kh\xe1c nhau. T\u01b0\u01a1ng t\u1ef1, ",(0,i.kt)("inlineCode",{parentName:"p"},"Promise.all")," v\xe0 ",(0,i.kt)("inlineCode",{parentName:"p"},"Promise.allSettled")," c\u0169ng l\xe0 hai ph\u01b0\u01a1ng th\u1ee9c kh\xe1c nhau trong vi\u1ec7c x\u1eed l\xfd nhi\u1ec1u Promise. D\u01b0\u1edbi \u0111\xe2y l\xe0 s\u1ef1 so s\xe1nh gi\u1eefa ch\xfang:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Promise.race")," vs. ",(0,i.kt)("inlineCode",{parentName:"li"},"Promise.any"),":")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Promise.race"),": Ph\u01b0\u01a1ng th\u1ee9c n\xe0y nh\u1eadn v\xe0o m\u1ed9t m\u1ea3ng c\xe1c Promise v\xe0 tr\u1ea3 v\u1ec1 Promise m\u1edbi. Promise n\xe0y s\u1ebd \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft ho\u1eb7c b\u1ecb t\u1eeb ch\u1ed1i ngay khi m\u1ed9t Promise trong m\u1ea3ng \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft ho\u1eb7c t\u1eeb ch\u1ed1i. K\u1ebft qu\u1ea3 c\u1ee7a Promise.race s\u1ebd l\xe0 k\u1ebft qu\u1ea3 c\u1ee7a Promise \u0111\u1ea7u ti\xean ho\xe0n th\xe0nh."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Promise.any"),": \u0110\xe2y l\xe0 m\u1ed9t ph\u01b0\u01a1ng th\u1ee9c m\u1edbi \u0111\u01b0\u1ee3c gi\u1edbi thi\u1ec7u trong ES2021. Promise.any c\u0169ng nh\u1eadn v\xe0o m\u1ed9t m\u1ea3ng c\xe1c Promise v\xe0 tr\u1ea3 v\u1ec1 m\u1ed9t Promise m\u1edbi. Promise n\xe0y s\u1ebd \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft ngay khi m\u1ed9t Promise trong m\u1ea3ng \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft. Tuy nhi\xean, n\u1ebfu t\u1ea5t c\u1ea3 c\xe1c Promise \u0111\u1ec1u b\u1ecb t\u1eeb ch\u1ed1i, Promise n\xe0y s\u1ebd b\u1ecb t\u1eeb ch\u1ed1i v\xe0 tr\u1ea3 v\u1ec1 m\u1ed9t l\u1ed7i ch\u1ee9a m\u1ea3ng c\xe1c l\u1ed7i t\u1eeb c\xe1c Promise \u0111\xe3 b\u1ecb t\u1eeb ch\u1ed1i."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Promise.all")," vs. ",(0,i.kt)("inlineCode",{parentName:"li"},"Promise.allSettled"),":")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Promise.all"),": Ph\u01b0\u01a1ng th\u1ee9c n\xe0y nh\u1eadn v\xe0o m\u1ed9t m\u1ea3ng c\xe1c Promise v\xe0 tr\u1ea3 v\u1ec1 m\u1ed9t Promise m\u1edbi. Promise n\xe0y ch\u1ec9 \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft khi t\u1ea5t c\u1ea3 c\xe1c Promise trong m\u1ea3ng \u0111\u1ec1u \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft. K\u1ebft qu\u1ea3 c\u1ee7a Promise.all l\xe0 m\u1ed9t m\u1ea3ng c\xe1c k\u1ebft qu\u1ea3 t\u01b0\u01a1ng \u1ee9ng v\u1edbi c\xe1c Promise trong m\u1ea3ng ban \u0111\u1ea7u."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Promise.allSettled"),": \u0110\xe2y l\xe0 m\u1ed9t ph\u01b0\u01a1ng th\u1ee9c kh\xe1c \u0111\u01b0\u1ee3c gi\u1edbi thi\u1ec7u trong ES2020. Promise.allSettled c\u0169ng nh\u1eadn v\xe0o m\u1ed9t m\u1ea3ng c\xe1c Promise v\xe0 tr\u1ea3 v\u1ec1 m\u1ed9t Promise m\u1edbi. Promise n\xe0y s\u1ebd \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft sau khi t\u1ea5t c\u1ea3 c\xe1c Promise trong m\u1ea3ng \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft ho\u1eb7c b\u1ecb t\u1eeb ch\u1ed1i. K\u1ebft qu\u1ea3 c\u1ee7a Promise.allSettled l\xe0 m\u1ed9t m\u1ea3ng c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng m\xf4 t\u1ea3 t\xecnh tr\u1ea1ng c\u1ee7a t\u1eebng Promise, b\u1ea5t k\u1ec3 l\xe0 \u0111\xe3 gi\u1ea3i quy\u1ebft hay t\u1eeb ch\u1ed1i."),(0,i.kt)("p",null,"T\xf3m l\u1ea1i:"),(0,i.kt)("p",null,"Promise.race v\xe0 Promise.any li\xean quan \u0111\u1ebfn vi\u1ec7c x\u1eed l\xfd k\u1ebft qu\u1ea3 t\u1eeb nhi\u1ec1u Promise nh\u01b0ng c\xf3 c\xe1ch ho\u1ea1t \u0111\u1ed9ng v\xe0 \u1ee9ng x\u1eed kh\xe1c nhau khi c\xf3 Promise b\u1ecb t\u1eeb ch\u1ed1i.\nPromise.all v\xe0 Promise.allSettled \u0111\u1ec1u li\xean quan \u0111\u1ebfn vi\u1ec7c ch\u1edd \u0111\u1ee3i k\u1ebft qu\u1ea3 t\u1eeb nhi\u1ec1u Promise, nh\u01b0ng Promise.all b\u1ecb t\u1eeb ch\u1ed1i khi c\xf3 \xedt nh\u1ea5t m\u1ed9t Promise b\u1ecb t\u1eeb ch\u1ed1i, trong khi Promise.allSettled tr\u1ea3 v\u1ec1 m\u1ed9t m\u1ea3ng t\xecnh tr\u1ea1ng c\u1ee7a t\u1ea5t c\u1ea3 Promise d\xf9 c\xf3 b\u1ecb t\u1eeb ch\u1ed1i hay kh\xf4ng."),(0,i.kt)("h2",{id:"asyncawait"},"Async/Await"),(0,i.kt)("p",null,"async/await \u0111\u01b0\u1ee3c x\xe2y d\u1ef1ng d\u1ef1a tr\xean promises v\xe0 cung c\u1ea5p c\xfa ph\xe1p d\u1ec5 \u0111\u1ecdc v\xe0 s\u1ea1ch h\u01a1n \u0111\u1ec3 x\u1eed l\xfd c\xe1c ho\u1ea1t \u0111\u1ed9ng b\u1ea5t \u0111\u1ed3ng b\u1ed9. M\u1ed9t h\xe0m \u0111\u01b0\u1ee3c khai b\xe1o v\u1edbi t\u1eeb kh\xf3a async lu\xf4n lu\xf4n tr\u1ea3 v\u1ec1 m\u1ed9t promise."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"async"),": T\u1eeb kh\xf3a n\xe0y \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 khai b\xe1o m\u1ed9t h\xe0m b\u1ea5t \u0111\u1ed3ng b\u1ed9."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"await"),": T\u1eeb kh\xf3a n\xe0y ch\u1ec9 c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng b\xean trong m\u1ed9t h\xe0m async v\xe0 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 t\u1ea1m d\u1eebng vi\u1ec7c th\u1ef1c thi c\u1ee7a h\xe0m async cho \u0111\u1ebfn khi promise \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft ho\u1eb7c b\u1ecb t\u1eeb ch\u1ed1i."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'async function fetchData() {\n  let response = await fetch("https://api.example.com/data");\n  let data = await response.json();\n  console.log(data);\n}\nfetchData();\n')))}g.isMDXComponent=!0}}]);