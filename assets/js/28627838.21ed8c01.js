"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3912],{3905:(n,e,t)=>{t.d(e,{Zo:()=>p,kt:()=>d});var r=t(7294);function o(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function c(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function i(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?c(Object(t),!0).forEach((function(e){o(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function u(n,e){if(null==n)return{};var t,r,o=function(n,e){if(null==n)return{};var t,r,o={},c=Object.keys(n);for(r=0;r<c.length;r++)t=c[r],e.indexOf(t)>=0||(o[t]=n[t]);return o}(n,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);for(r=0;r<c.length;r++)t=c[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}var a=r.createContext({}),l=function(n){var e=r.useContext(a),t=e;return n&&(t="function"==typeof n?n(e):i(i({},e),n)),t},p=function(n){var e=l(n.components);return r.createElement(a.Provider,{value:e},n.children)},m="mdxType",g={inlineCode:"code",wrapper:function(n){var e=n.children;return r.createElement(r.Fragment,{},e)}},s=r.forwardRef((function(n,e){var t=n.components,o=n.mdxType,c=n.originalType,a=n.parentName,p=u(n,["components","mdxType","originalType","parentName"]),m=l(t),s=o,d=m["".concat(a,".").concat(s)]||m[s]||g[s]||c;return t?r.createElement(d,i(i({ref:e},p),{},{components:t})):r.createElement(d,i({ref:e},p))}));function d(n,e){var t=arguments,o=e&&e.mdxType;if("string"==typeof n||o){var c=t.length,i=new Array(c);i[0]=s;var u={};for(var a in e)hasOwnProperty.call(e,a)&&(u[a]=e[a]);u.originalType=n,u[m]="string"==typeof n?n:o,i[1]=u;for(var l=2;l<c;l++)i[l]=t[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}s.displayName="MDXCreateElement"},7942:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>i,default:()=>g,frontMatter:()=>c,metadata:()=>u,toc:()=>l});var r=t(7462),o=(t(7294),t(3905));const c={title:"Mutex"},i=void 0,u={unversionedId:"programming/go/mutex",id:"programming/go/mutex",title:"Mutex",description:"Concept",source:"@site/docs/programming/go/mutex.md",sourceDirName:"programming/go",slug:"/programming/go/mutex",permalink:"/docs/programming/go/mutex",draft:!1,tags:[],version:"current",frontMatter:{title:"Mutex"},sidebar:"programming",previous:{title:"Goroutine",permalink:"/docs/programming/go/goroutine"},next:{title:"Data Structures",permalink:"/docs/programming/algorithm/data-structures"}},a={},l=[{value:"Concept",id:"concept",level:2},{value:"Code",id:"code",level:2}],p={toc:l},m="wrapper";function g(n){let{components:e,...t}=n;return(0,o.kt)(m,(0,r.Z)({},p,t,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"concept"},"Concept"),(0,o.kt)("p",null,"Mutex (Mutual Exclusion) l\xe0 m\u1ed9t c\u01a1 ch\u1ebf \u0111\u1ed3ng b\u1ed9 \u0111\u1ea3m b\u1ea3o ch\u1ec9 c\xf3 m\u1ed9t Goroutine truy c\u1eadp d\u1eef li\u1ec7u v\xe0o b\u1ea5t k\u1ef3 th\u1eddi \u0111i\u1ec3m n\xe0o, ng\u0103n ng\u1eeba xung \u0111\u1ed9t d\u1eef li\u1ec7u khi \u0111\u01b0\u1ee3c truy c\u1eadp c\xf9ng l\xfac b\u1edfi nhi\u1ec1u Goroutines. Khi b\u1ea1n c\u1ea7n \u0111\u1ed3ng b\u1ed9 h\xf3a vi\u1ec7c truy c\u1eadp d\u1eef li\u1ec7u gi\u1eefa c\xe1c Goroutines v\xe0 \u0111\u1ea3m b\u1ea3o d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c truy c\u1eadp \u0111\xfang c\xe1ch, Mutex l\xe0 c\xf4ng c\u1ee5 \u0111\xfang \u0111\u1eafn."),(0,o.kt)("h2",{id:"code"},"Code"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-go"},'\n// Khai b\xe1o m\u1ed9t instance mutex\nvar mu sync.Mutex\n\n//Khai b\xe1o bi\u1ebfn count \u0111\u01b0\u1ee3c truy c\u1eadp b\u1edfi t\u1ea5t c\u1ea3 c\xe1c routine\nvar count = 0\n\n// Sao ch\xe9p count v\xe0o temp, th\u1ef1c hi\u1ec7n m\u1ed9t v\xe0i x\u1eed l\xfd (t\u0103ng d\u1ea7n) v\xe0 l\u01b0u l\u1ea1i v\xe0o count\n// t\u1ea1m d\u1eebng m\u1ed9t kho\u1ea3ng ng\u1eabu nhi\xean \u0111\u01b0\u1ee3c th\xeam v\xe0o gi\u1eefa l\xfac \u0111\u1ecdc v\xe0 ghi count\nfunc process(n int) {\n    //V\xf2ng l\u1eb7p t\u0103ng count 10 l\u1ea7n\n    for i := 0; i < 10; i++ {\n        time.Sleep(time.Duration(rand.Int31n(2)) * time.Second)\n        //B\u1eaft \u0111\u1ea7u kho\xe1 \u1edf \u0111\xe2y\n        mu.Lock()\n        temp := count\n        temp++\n        time.Sleep(time.Duration(rand.Int31n(2)) * time.Second)\n        count = temp\n        // M\u1edf kho\xe1\n        mu.Unlock()\n    }\n    fmt.Println("Count after i="+strconv.Itoa(n)+" Count:", strconv.Itoa(count))\n}\n\n// Mutex func\nfunc mutex() {\n    //l\u1eb7p g\u1ecdi process() 3 l\u1ea7n\n    for i := 1; i < 4; i++ {\n        go process(i)\n    }\n\n    //T\u1ea1m d\u1eebng \u0111\u1ec3 \u0111\u1ee3i cho t\u1ea5t c\u1ea3 routine ho\xe0n th\xe0nh\n    time.Sleep(25 * time.Second)\n    fmt.Println("Final Count:", count)\n}\n')))}g.isMDXComponent=!0}}]);