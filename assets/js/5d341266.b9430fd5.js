"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[723],{3905:(t,n,e)=>{e.d(n,{Zo:()=>p,kt:()=>k});var i=e(7294);function a(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function l(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,i)}return e}function r(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?l(Object(e),!0).forEach((function(n){a(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function h(t,n){if(null==t)return{};var e,i,a=function(t,n){if(null==t)return{};var e,i,a={},l=Object.keys(t);for(i=0;i<l.length;i++)e=l[i],n.indexOf(e)>=0||(a[e]=t[e]);return a}(t,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)e=l[i],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(a[e]=t[e])}return a}var c=i.createContext({}),u=function(t){var n=i.useContext(c),e=n;return t&&(e="function"==typeof t?t(n):r(r({},n),t)),e},p=function(t){var n=u(t.components);return i.createElement(c.Provider,{value:n},t.children)},m="mdxType",g={inlineCode:"code",wrapper:function(t){var n=t.children;return i.createElement(i.Fragment,{},n)}},o=i.forwardRef((function(t,n){var e=t.components,a=t.mdxType,l=t.originalType,c=t.parentName,p=h(t,["components","mdxType","originalType","parentName"]),m=u(e),o=a,k=m["".concat(c,".").concat(o)]||m[o]||g[o]||l;return e?i.createElement(k,r(r({ref:n},p),{},{components:e})):i.createElement(k,r({ref:n},p))}));function k(t,n){var e=arguments,a=n&&n.mdxType;if("string"==typeof t||a){var l=e.length,r=new Array(l);r[0]=o;var h={};for(var c in n)hasOwnProperty.call(n,c)&&(h[c]=n[c]);h.originalType=t,h[m]="string"==typeof t?t:a,r[1]=h;for(var u=2;u<l;u++)r[u]=e[u];return i.createElement.apply(null,r)}return i.createElement.apply(null,e)}o.displayName="MDXCreateElement"},3938:(t,n,e)=>{e.r(n),e.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>g,frontMatter:()=>l,metadata:()=>h,toc:()=>u});var i=e(7462),a=(e(7294),e(3905));const l={title:"Redis"},r=void 0,h={unversionedId:"blog/programming/redis",id:"blog/programming/redis",title:"Redis",description:"Redis (Remote Dictionary Server) kh\xf4ng ch\u1ec9 l\xe0 m\u1ed9t key-value store \u0111\u01a1n gi\u1ea3n. N\xf3 l\xe0 m\u1ed9t kho l\u01b0u tr\u1eef c\u1ea5u tr\xfac d\u1eef li\u1ec7u trong b\u1ed9 nh\u1edb (in-memory data structure store) c\u1ef1c k\u1ef3 nhanh ch\xf3ng v\xe0 linh ho\u1ea1t, \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng r\u1ed9ng r\xe3i cho caching, qu\u1ea3n l\xfd session, message broker, real-time analytics.",source:"@site/docs/blog/programming/redis.md",sourceDirName:"blog/programming",slug:"/blog/programming/redis",permalink:"/blog/programming/redis",draft:!1,tags:[],version:"current",frontMatter:{title:"Redis"},sidebar:"blog",previous:{title:"Message Queue",permalink:"/blog/programming/message-queue"},next:{title:"Computer Science",permalink:"/blog/programming/computer-science"}},c={},u=[{value:"T\u1ed1i \u01b0u Hi\u1ec7u n\u0103ng Redis (Redis Performance Optimization)",id:"t\u1ed1i-\u01b0u-hi\u1ec7u-n\u0103ng-redis-redis-performance-optimization",level:2},{value:"C\xe1c Caching Pattern Ph\u1ed5 bi\u1ebfn v\u1edbi Redis",id:"c\xe1c-caching-pattern-ph\u1ed5-bi\u1ebfn-v\u1edbi-redis",level:2},{value:"Cache-Aside (Lazy Loading):",id:"cache-aside-lazy-loading",level:4},{value:"Read-Through:",id:"read-through",level:4},{value:"Write-Through:",id:"write-through",level:4},{value:"Write-Behind (Write-Back):",id:"write-behind-write-back",level:4},{value:"Cache Eviction v\xe0 TTL:",id:"cache-eviction-v\xe0-ttl",level:4},{value:"Nh\u1eefng \u0111i\u1ec1u c\u1ea7n quan t\xe2m khi SET/GET trong Redis",id:"nh\u1eefng-\u0111i\u1ec1u-c\u1ea7n-quan-t\xe2m-khi-setget-trong-redis",level:2},{value:"Quy \u01b0\u1edbc \u0110\u1eb7t t\xean Key (Key Naming Conventions):",id:"quy-\u01b0\u1edbc-\u0111\u1eb7t-t\xean-key-key-naming-conventions",level:4},{value:"Serialization (Tu\u1ea7n t\u1ef1 h\xf3a):",id:"serialization-tu\u1ea7n-t\u1ef1-h\xf3a",level:4},{value:"Atomicity (T\xednh Nguy\xean t\u1eed):",id:"atomicity-t\xednh-nguy\xean-t\u1eed",level:4},{value:"X\u1eed l\xfd L\u1ed7i (Error Handling):",id:"x\u1eed-l\xfd-l\u1ed7i-error-handling",level:4},{value:"K\xedch th\u01b0\u1edbc D\u1eef li\u1ec7u (Data Size):",id:"k\xedch-th\u01b0\u1edbc-d\u1eef-li\u1ec7u-data-size",level:4},{value:"C\xe1c Ki\u1ec3u SET/GET v\xe0 Use Case H\u1ee3p l\xfd",id:"c\xe1c-ki\u1ec3u-setget-v\xe0-use-case-h\u1ee3p-l\xfd",level:2}],p={toc:u},m="wrapper";function g(t){let{components:n,...e}=t;return(0,a.kt)(m,(0,i.Z)({},p,e,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Redis (Remote Dictionary Server) kh\xf4ng ch\u1ec9 l\xe0 m\u1ed9t key-value store \u0111\u01a1n gi\u1ea3n. N\xf3 l\xe0 m\u1ed9t kho l\u01b0u tr\u1eef c\u1ea5u tr\xfac d\u1eef li\u1ec7u trong b\u1ed9 nh\u1edb (in-memory data structure store) c\u1ef1c k\u1ef3 nhanh ch\xf3ng v\xe0 linh ho\u1ea1t, \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng r\u1ed9ng r\xe3i cho caching, qu\u1ea3n l\xfd session, message broker, real-time analytics."),(0,a.kt)("h2",{id:"t\u1ed1i-\u01b0u-hi\u1ec7u-n\u0103ng-redis-redis-performance-optimization"},"T\u1ed1i \u01b0u Hi\u1ec7u n\u0103ng Redis (Redis Performance Optimization)"),(0,a.kt)("p",null,"\u0110\u1ec3 Redis ho\u1ea1t \u0111\u1ed9ng v\u1edbi t\u1ed1c \u0111\u1ed9 cao nh\u1ea5t v\xe0 s\u1eed d\u1ee5ng t\xe0i nguy\xean hi\u1ec7u qu\u1ea3, h\xe3y xem x\xe9t c\xe1c \u0111i\u1ec3m sau:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"maxmemory: \u0110\u1eb7t gi\u1edbi h\u1ea1n b\u1ed9 nh\u1edb t\u1ed1i \u0111a Redis c\xf3 th\u1ec3 s\u1eed d\u1ee5ng trong file c\u1ea5u h\xecnh (redis.conf). Khi \u0111\u1ea1t \u0111\u1ebfn gi\u1edbi h\u1ea1n n\xe0y, Redis s\u1ebd \xe1p d\u1ee5ng ch\xednh s\xe1ch lo\u1ea1i b\u1ecf (eviction policy)."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"maxmemory-policy: Ch\u1ecdn ch\xednh s\xe1ch lo\u1ea1i b\u1ecf ph\xf9 h\u1ee3p v\u1edbi use case c\u1ee7a b\u1ea1n. C\xe1c ch\xednh s\xe1ch ph\u1ed5 bi\u1ebfn:"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"noeviction: Kh\xf4ng x\xf3a key n\xe0o khi \u0111\u1ea7y b\u1ed9 nh\u1edb, tr\u1ea3 l\u1ed7i cho c\xe1c l\u1ec7nh ghi m\u1edbi (kh\xf4ng n\xean d\xf9ng cho cache).")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"allkeys-lru: X\xf3a c\xe1c key \xedt \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng g\u1ea7n \u0111\xe2y nh\u1ea5t (Least Recently Used) trong to\xe0n b\u1ed9 keyspace. Th\u01b0\u1eddng l\xe0 l\u1ef1a ch\u1ecdn t\u1ed1t cho cache.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"volatile-lru: Ch\u1ec9 x\xf3a c\xe1c key \xedt \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng g\u1ea7n \u0111\xe2y nh\u1ea5t trong s\u1ed1 c\xe1c key c\xf3 \u0111\u1eb7t TTL (Time-To-Live).")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"allkeys-lfu: X\xf3a c\xe1c key \xedt \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng th\u01b0\u1eddng xuy\xean nh\u1ea5t (Least Frequently Used).")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"volatile-lfu: Ch\u1ec9 x\xf3a c\xe1c key \xedt \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng th\u01b0\u1eddng xuy\xean nh\u1ea5t trong s\u1ed1 c\xe1c key c\xf3 \u0111\u1eb7t TTL.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"allkeys-random: X\xf3a key ng\u1eabu nhi\xean.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"volatile-random: X\xf3a key ng\u1eabu nhi\xean trong s\u1ed1 c\xe1c key c\xf3 TTL.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"volatile-ttl: X\xf3a c\xe1c key c\xf3 TTL s\u1eafp h\u1ebft h\u1ea1n nh\u1ea5t.")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Theo d\xf5i vi\u1ec7c s\u1eed d\u1ee5ng b\u1ed9 nh\u1edb (INFO memory) \u0111\u1ec3 \u0111i\u1ec1u ch\u1ec9nh maxmemory h\u1ee3p l\xfd.")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Ch\u1ecdn \u0110\xfang C\u1ea5u tr\xfac D\u1eef li\u1ec7u:"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Redis h\u1ed7 tr\u1ee3 nhi\u1ec1u c\u1ea5u tr\xfac d\u1eef li\u1ec7u (Strings, Hashes, Lists, Sets, Sorted Sets, Streams, HyperLogLogs, Bitmaps,...).")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"S\u1eed d\u1ee5ng c\u1ea5u tr\xfac ph\xf9 h\u1ee3p gi\xfap ti\u1ebft ki\u1ec7m b\u1ed9 nh\u1edb v\xe0 t\u0103ng t\u1ed1c \u0111\u1ed9 truy c\u1eadp.")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Pipelining:"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Gi\u1ea3m \u0111\u1ed9 tr\u1ec5 m\u1ea1ng b\u1eb1ng c\xe1ch g\u1eedi nhi\u1ec1u l\u1ec7nh \u0111\u1ebfn Redis server trong m\u1ed9t l\u01b0\u1ee3t \u0111i (round trip) thay v\xec g\u1eedi t\u1eebng l\u1ec7nh v\xe0 ch\u1edd ph\u1ea3n h\u1ed3i. Client library s\u1ebd \u0111\u1ee3i t\u1ea5t c\u1ea3 ph\u1ea3n h\u1ed3i tr\u1ea3 v\u1ec1 c\xf9ng l\xfac.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"R\u1ea5t hi\u1ec7u qu\u1ea3 khi b\u1ea1n c\u1ea7n th\u1ef1c hi\u1ec7n nhi\u1ec1u l\u1ec7nh li\xean ti\u1ebfp.")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Persistence (L\u01b0u tr\u1eef B\u1ec1n v\u1eefng):"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Redis cung c\u1ea5p hai c\u01a1 ch\u1ebf ch\xednh:"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"RDB (Snapshotting): L\u01b0u tr\u1ea1ng th\xe1i database v\xe0o m\u1ed9t file .rdb theo chu k\u1ef3. Nhanh h\u01a1n khi kh\u1edfi \u0111\u1ed9ng l\u1ea1i, file nh\u1ecf g\u1ecdn h\u01a1n, nh\u01b0ng c\xf3 th\u1ec3 m\u1ea5t d\u1eef li\u1ec7u gi\u1eefa c\xe1c l\u1ea7n snapshot.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"AOF (Append Only File): Ghi l\u1ea1i m\u1ecdi l\u1ec7nh ghi v\xe0o m\u1ed9t file log. B\u1ec1n h\u01a1n RDB (c\xf3 th\u1ec3 c\u1ea5u h\xecnh t\u1ea7n su\u1ea5t fsync), nh\u01b0ng file l\u1edbn h\u01a1n v\xe0 kh\u1edfi \u0111\u1ed9ng l\u1ea1i ch\u1eadm h\u01a1n.")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Trade-off: Ch\u1ecdn c\u01a1 ch\u1ebf ph\xf9 h\u1ee3p d\u1ef1a tr\xean y\xeau c\u1ea7u v\u1ec1 \u0111\u1ed9 b\u1ec1n d\u1eef li\u1ec7u v\xe0 hi\u1ec7u n\u0103ng.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"T\u1ed1i \u01b0u cho Cache: N\u1ebfu ch\u1ec9 d\xf9ng Redis l\xe0m cache (d\u1eef li\u1ec7u c\xf3 th\u1ec3 t\xe1i t\u1ea1o t\u1eeb ngu\u1ed3n kh\xe1c), b\u1ea1n c\xf3 th\u1ec3 t\u1eaft ho\xe0n to\xe0n persistence \u0111\u1ec3 \u0111\u1ea1t hi\u1ec7u n\u0103ng ghi cao nh\u1ea5t.")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Connection Pooling (Ph\xeda Client): Lu\xf4n s\u1eed d\u1ee5ng connection pool \u1edf t\u1ea7ng \u1ee9ng d\u1ee5ng \u0111\u1ec3 t\xe1i s\u1eed d\u1ee5ng c\xe1c k\u1ebft n\u1ed1i TCP \u0111\u1ebfn Redis server, tr\xe1nh chi ph\xed thi\u1ebft l\u1eadp k\u1ebft n\u1ed1i m\u1edbi cho m\u1ed7i y\xeau c\u1ea7u. H\u1ea7u h\u1ebft c\xe1c Redis client library \u0111\u1ec1u h\u1ed7 tr\u1ee3 connection pooling.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"M\u1ea1ng (Networking):"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u0110\u1eb7t Redis server v\xe0 client \u1ee9ng d\u1ee5ng c\xe0ng g\u1ea7n nhau c\xe0ng t\u1ed1t (c\xf9ng datacenter, c\xf9ng availability zone) \u0111\u1ec3 gi\u1ea3m \u0111\u1ed9 tr\u1ec5 m\u1ea1ng.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"N\u1ebfu client v\xe0 server tr\xean c\xf9ng m\u1ed9t m\xe1y, c\xe2n nh\u1eafc s\u1eed d\u1ee5ng Unix domain sockets thay v\xec TCP/IP \u0111\u1ec3 t\u0103ng t\u1ed1c \u0111\u1ed9.")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Gi\xe1m s\xe1t (Monitoring):"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"S\u1eed d\u1ee5ng l\u1ec7nh INFO \u0111\u1ec3 xem tr\u1ea1ng th\xe1i chi ti\u1ebft c\u1ee7a Redis server (memory, clients, stats, persistence,...).")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"S\u1eed d\u1ee5ng c\xe1c c\xf4ng c\u1ee5 nh\u01b0 redis-cli --stat, htop, ho\u1eb7c c\xe1c gi\u1ea3i ph\xe1p monitoring chuy\xean d\u1ee5ng (Prometheus Redis Exporter, Datadog, New Relic) \u0111\u1ec3 theo d\xf5i hi\u1ec7u n\u0103ng v\xe0 ph\xe1t hi\u1ec7n v\u1ea5n \u0111\u1ec1 s\u1edbm."))))),(0,a.kt)("h2",{id:"c\xe1c-caching-pattern-ph\u1ed5-bi\u1ebfn-v\u1edbi-redis"},"C\xe1c Caching Pattern Ph\u1ed5 bi\u1ebfn v\u1edbi Redis"),(0,a.kt)("h4",{id:"cache-aside-lazy-loading"},"Cache-Aside (Lazy Loading):"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Lu\u1ed3ng ho\u1ea1t \u0111\u1ed9ng:"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u1ee8ng d\u1ee5ng ki\u1ec3m tra xem d\u1eef li\u1ec7u c\xf3 trong Redis cache kh\xf4ng (GET key).")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Cache Hit: N\u1ebfu c\xf3, tr\u1ea3 v\u1ec1 d\u1eef li\u1ec7u t\u1eeb cache.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Cache Miss: N\u1ebfu kh\xf4ng c\xf3:"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"a. \u1ee8ng d\u1ee5ng truy v\u1ea5n d\u1eef li\u1ec7u t\u1eeb database ch\xednh (ngu\u1ed3n s\u1ef1 th\u1eadt - source of truth)."),(0,a.kt)("li",{parentName:"ul"},"b. \u1ee8ng d\u1ee5ng l\u01b0u d\u1eef li\u1ec7u v\u1eeba l\u1ea5y \u0111\u01b0\u1ee3c v\xe0o Redis cache (SET key value EX ttl)."),(0,a.kt)("li",{parentName:"ul"},"c. \u1ee8ng d\u1ee5ng tr\u1ea3 v\u1ec1 d\u1eef li\u1ec7u cho client."))))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u01afu \u0111i\u1ec3m: Ch\u1ec9 cache nh\u1eefng d\u1eef li\u1ec7u th\u1ef1c s\u1ef1 \u0111\u01b0\u1ee3c y\xeau c\u1ea7u. D\u1ec5 tri\u1ec3n khai. Redis kh\xf4ng c\u1ea7n bi\u1ebft v\u1ec1 database.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Nh\u01b0\u1ee3c \u0111i\u1ec3m: Cache Miss Penalty: L\u1ea7n \u0111\u1ea7u ti\xean truy c\u1eadp d\u1eef li\u1ec7u s\u1ebd ch\u1eadm h\u01a1n v\xec ph\u1ea3i \u0111\u1ecdc t\u1eeb DB v\xe0 ghi v\xe0o cache.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Stale Data (D\u1eef li\u1ec7u c\u0169): D\u1eef li\u1ec7u trong cache c\xf3 th\u1ec3 tr\u1edf n\xean c\u0169 n\u1ebfu d\u1eef li\u1ec7u trong DB thay \u0111\u1ed5i tr\u01b0\u1edbc khi cache h\u1ebft h\u1ea1n (TTL). C\u1ea7n c\xf3 chi\u1ebfn l\u01b0\u1ee3c l\xe0m m\u1edbi cache (v\xed d\u1ee5: x\xf3a key trong cache khi c\u1eadp nh\u1eadt DB, ho\u1eb7c ch\u1ea5p nh\u1eadn d\u1eef li\u1ec7u c\u0169 trong kho\u1ea3ng TTL)."))),(0,a.kt)("h4",{id:"read-through"},"Read-Through:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Lu\u1ed3ng ho\u1ea1t \u0111\u1ed9ng: \u1ee8ng d\u1ee5ng lu\xf4n g\u1ecdi \u0111\u1ebfn cache \u0111\u1ec3 l\u1ea5y d\u1eef li\u1ec7u. Cache provider (c\xf3 th\u1ec3 l\xe0 m\u1ed9t th\u01b0 vi\u1ec7n ho\u1eb7c proxy) s\u1ebd t\u1ef1 ki\u1ec3m tra cache. N\u1ebfu miss, cache provider s\u1ebd t\u1ef1 \u0111\u1ed9ng l\u1ea5y d\u1eef li\u1ec7u t\u1eeb DB, l\u01b0u v\xe0o cache v\xe0 tr\u1ea3 v\u1ec1 cho \u1ee9ng d\u1ee5ng.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"V\u1edbi Redis: Pattern n\xe0y \xedt ph\u1ed5 bi\u1ebfn h\u01a1n v\xec Redis t\u1ef1 n\xf3 kh\xf4ng tr\u1ef1c ti\u1ebfp t\u01b0\u01a1ng t\xe1c v\u1edbi DB. Th\u01b0\u1eddng c\u1ea7n m\u1ed9t l\u1edbp th\u01b0 vi\u1ec7n/framework h\u1ed7 tr\u1ee3 \u0111\u1ec3 tri\u1ec3n khai logic n\xe0y."))),(0,a.kt)("h4",{id:"write-through"},"Write-Through:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Lu\u1ed3ng ho\u1ea1t \u0111\u1ed9ng:"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u1ee8ng d\u1ee5ng th\u1ef1c hi\u1ec7n thao t\xe1c ghi.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Ghi d\u1eef li\u1ec7u v\xe0o Redis cache (SET key value).")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u0110\u1ed3ng th\u1eddi ho\u1eb7c ngay sau \u0111\xf3, ghi d\u1eef li\u1ec7u v\xe0o database ch\xednh. C\u1ea3 hai thao t\xe1c ph\u1ea3i th\xe0nh c\xf4ng (ho\u1eb7c c\xf3 c\u01a1 ch\u1ebf x\u1eed l\xfd l\u1ed7i/retry).")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u01afu \u0111i\u1ec3m: D\u1eef li\u1ec7u trong cache v\xe0 DB lu\xf4n (ho\u1eb7c g\u1ea7n nh\u01b0 lu\xf4n) nh\u1ea5t qu\xe1n. Gi\u1ea3m kh\u1ea3 n\u0103ng \u0111\u1ecdc ph\u1ea3i d\u1eef li\u1ec7u c\u0169 sau khi ghi.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Nh\u01b0\u1ee3c \u0111i\u1ec3m: T\u0103ng \u0111\u1ed9 tr\u1ec5 cho thao t\xe1c ghi v\xec ph\u1ea3i ghi v\xe0o c\u1ea3 hai n\u01a1i. N\u1ebfu Redis kh\xf4ng s\u1eb5n s\xe0ng, thao t\xe1c ghi c\xf3 th\u1ec3 th\u1ea5t b\u1ea1i (tr\u1eeb khi c\xf3 x\u1eed l\xfd ph\xf9 h\u1ee3p)."))),(0,a.kt)("h4",{id:"write-behind-write-back"},"Write-Behind (Write-Back):"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Lu\u1ed3ng ho\u1ea1t \u0111\u1ed9ng:"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u1ee8ng d\u1ee5ng th\u1ef1c hi\u1ec7n thao t\xe1c ghi.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Ghi d\u1eef li\u1ec7u v\xe0o Redis cache (SET key value). Thao t\xe1c n\xe0y th\u01b0\u1eddng r\u1ea5t nhanh.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u1ee8ng d\u1ee5ng tr\u1ea3 v\u1ec1 th\xe0nh c\xf4ng cho client ngay l\u1eadp t\u1ee9c.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Sau m\u1ed9t kho\u1ea3ng th\u1eddi gian tr\u1ec5 ho\u1eb7c theo m\u1ed9t batch, d\u1eef li\u1ec7u t\u1eeb cache s\u1ebd \u0111\u01b0\u1ee3c ghi v\xe0o database ch\xednh m\u1ed9t c\xe1ch b\u1ea5t \u0111\u1ed3ng b\u1ed9.")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u01afu \u0111i\u1ec3m: Thao t\xe1c ghi c\u1ef1c k\u1ef3 nhanh v\xec ch\u1ec9 c\u1ea7n ghi v\xe0o Redis. Gi\u1ea3m t\u1ea3i cho database ch\xednh.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Nh\u01b0\u1ee3c \u0111i\u1ec3m:"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"R\u1ee7i ro m\u1ea5t d\u1eef li\u1ec7u: N\u1ebfu Redis g\u1eb7p s\u1ef1 c\u1ed1 tr\u01b0\u1edbc khi d\u1eef li\u1ec7u k\u1ecbp ghi v\xe0o DB, d\u1eef li\u1ec7u \u0111\xf3 s\u1ebd b\u1ecb m\u1ea5t.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Ph\u1ee9c t\u1ea1p: C\u1ea7n tri\u1ec3n khai c\u01a1 ch\u1ebf \u0111\xe1ng tin c\u1eady \u0111\u1ec3 ghi d\u1eef li\u1ec7u t\u1eeb cache v\xe0o DB.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"D\u1eef li\u1ec7u trong DB c\xf3 th\u1ec3 kh\xf4ng nh\u1ea5t qu\xe1n v\u1edbi cache trong m\u1ed9t kho\u1ea3ng th\u1eddi gian."))))),(0,a.kt)("h4",{id:"cache-eviction-v\xe0-ttl"},"Cache Eviction v\xe0 TTL:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Lu\xf4n \u0111\u1eb7t TTL (Time-To-Live) h\u1ee3p l\xfd cho c\xe1c cache key b\u1eb1ng l\u1ec7nh EXPIRE ho\u1eb7c c\xe1c t\xf9y ch\u1ecdn EX/PX trong l\u1ec7nh SET. TTL gi\xfap t\u1ef1 \u0111\u1ed9ng x\xf3a d\u1eef li\u1ec7u c\u0169, gi\u1ea3i ph\xf3ng b\u1ed9 nh\u1edb v\xe0 gi\u1ea3m nguy c\u01a1 stale data.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Ch\u1ecdn maxmemory-policy ph\xf9 h\u1ee3p (th\u01b0\u1eddng l\xe0 allkeys-lru ho\u1eb7c volatile-lru cho cache) \u0111\u1ec3 Redis bi\u1ebft c\xe1ch x\u1eed l\xfd khi b\u1ed9 nh\u1edb \u0111\u1ea7y."))),(0,a.kt)("h2",{id:"nh\u1eefng-\u0111i\u1ec1u-c\u1ea7n-quan-t\xe2m-khi-setget-trong-redis"},"Nh\u1eefng \u0111i\u1ec1u c\u1ea7n quan t\xe2m khi SET/GET trong Redis"),(0,a.kt)("p",null,"Khi l\xe0m vi\u1ec7c v\u1edbi c\xe1c l\u1ec7nh c\u01a1 b\u1ea3n nh\u01b0 SET v\xe0 GET, h\xe3y l\u01b0u \xfd:"),(0,a.kt)("h4",{id:"quy-\u01b0\u1edbc-\u0111\u1eb7t-t\xean-key-key-naming-conventions"},"Quy \u01b0\u1edbc \u0110\u1eb7t t\xean Key (Key Naming Conventions):"),(0,a.kt)("p",null,"S\u1eed d\u1ee5ng t\xean key r\xf5 r\xe0ng, c\xf3 c\u1ea5u tr\xfac v\xe0 nh\u1ea5t qu\xe1n."),(0,a.kt)("p",null,"D\xf9ng d\u1ea5u hai ch\u1ea5m (:) \u0111\u1ec3 ph\xe2n c\u1ea5p, v\xed d\u1ee5: ",(0,a.kt)("inlineCode",{parentName:"p"},"object-type:id:field")," -> ",(0,a.kt)("inlineCode",{parentName:"p"},"user:123:profile"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"product:abc:stock"),"."),(0,a.kt)("p",null,"Gi\u1eef t\xean key h\u1ee3p l\xfd, kh\xf4ng qu\xe1 d\xe0i (t\u1ed1n b\u1ed9 nh\u1edb) nh\u01b0ng \u0111\u1ee7 m\xf4 t\u1ea3."),(0,a.kt)("h4",{id:"serialization-tu\u1ea7n-t\u1ef1-h\xf3a"},"Serialization (Tu\u1ea7n t\u1ef1 h\xf3a):"),(0,a.kt)("p",null,"Redis l\u01b0u tr\u1eef d\u1eef li\u1ec7u d\u01b0\u1edbi d\u1ea1ng byte sequences. Khi l\u01b0u c\xe1c c\u1ea5u tr\xfac d\u1eef li\u1ec7u ph\u1ee9c t\u1ea1p (object, array), b\u1ea1n c\u1ea7n tu\u1ea7n t\u1ef1 h\xf3a ch\xfang th\xe0nh m\u1ed9t \u0111\u1ecbnh d\u1ea1ng nh\u01b0 JSON, MessagePack, BSON,... tr\u01b0\u1edbc khi SET, v\xe0 gi\u1ea3i tu\u1ea7n t\u1ef1 h\xf3a sau khi GET."),(0,a.kt)("p",null,"JSON l\xe0 ph\u1ed5 bi\u1ebfn nh\u1ea5t, d\u1ec5 \u0111\u1ecdc, nh\u01b0ng c\xf3 th\u1ec3 t\u1ed1n dung l\u01b0\u1ee3ng h\u01a1n MessagePack. Ch\u1ecdn \u0111\u1ecbnh d\u1ea1ng ph\xf9 h\u1ee3p v\u1edbi nhu c\u1ea7u v\u1ec1 hi\u1ec7u n\u0103ng v\xe0 dung l\u01b0\u1ee3ng."),(0,a.kt)("h4",{id:"atomicity-t\xednh-nguy\xean-t\u1eed"},"Atomicity (T\xednh Nguy\xean t\u1eed):"),(0,a.kt)("p",null,"M\u1ed7i l\u1ec7nh Redis \u0111\u01a1n l\u1ebb (nh\u01b0 SET, GET, INCR) l\xe0 nguy\xean t\u1eed."),(0,a.kt)("p",null,"N\u1ebfu c\u1ea7n th\u1ef1c hi\u1ec7n nhi\u1ec1u thao t\xe1c m\u1ed9t c\xe1ch nguy\xean t\u1eed (v\xed d\u1ee5: \u0111\u1ecdc m\u1ed9t gi\xe1 tr\u1ecb v\xe0 ghi l\u1ea1i gi\xe1 tr\u1ecb m\u1edbi d\u1ef1a tr\xean n\xf3), h\xe3y s\u1eed d\u1ee5ng:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Transactions (MULTI/EXEC): Nh\xf3m nhi\u1ec1u l\u1ec7nh l\u1ea1i, ch\xfang s\u1ebd \u0111\u01b0\u1ee3c th\u1ef1c thi tu\u1ea7n t\u1ef1 m\xe0 kh\xf4ng b\u1ecb l\u1ec7nh t\u1eeb client kh\xe1c xen v\xe0o. Tuy nhi\xean, n\xf3 kh\xf4ng c\xf3 c\u01a1 ch\u1ebf rollback n\u1ebfu m\u1ed9t l\u1ec7nh gi\u1eefa ch\u1eebng th\u1ea5t b\u1ea1i logic (v\xed d\u1ee5: ki\u1ec3u d\u1eef li\u1ec7u sai).")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Lua Scripts (EVAL, EVALSHA): C\xe1ch m\u1ea1nh m\u1ebd h\u01a1n \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o t\xednh nguy\xean t\u1eed cho c\xe1c logic ph\u1ee9c t\u1ea1p. Script Lua ch\u1ea1y tr\xean server Redis, gi\u1ea3m thi\u1ec3u network round trips v\xe0 \u0111\u1ea3m b\u1ea3o kh\xf4ng b\u1ecb gi\xe1n \u0111o\u1ea1n."))),(0,a.kt)("h4",{id:"x\u1eed-l\xfd-l\u1ed7i-error-handling"},"X\u1eed l\xfd L\u1ed7i (Error Handling):"),(0,a.kt)("p",null,"Lu\xf4n ki\u1ec3m tra l\u1ed7i k\u1ebft n\u1ed1i, timeout khi t\u01b0\u01a1ng t\xe1c v\u1edbi Redis."),(0,a.kt)("p",null,"L\u1ec7nh GET tr\u1ea3 v\u1ec1 nil (ho\u1eb7c null t\xf9y client library) n\u1ebfu key kh\xf4ng t\u1ed3n t\u1ea1i. C\u1ea7n x\u1eed l\xfd tr\u01b0\u1eddng h\u1ee3p n\xe0y (th\u01b0\u1eddng l\xe0 cache miss)."),(0,a.kt)("h4",{id:"k\xedch-th\u01b0\u1edbc-d\u1eef-li\u1ec7u-data-size"},"K\xedch th\u01b0\u1edbc D\u1eef li\u1ec7u (Data Size):"),(0,a.kt)("p",null,"Tr\xe1nh l\u01b0u tr\u1eef c\xe1c gi\xe1 tr\u1ecb (value) qu\xe1 l\u1edbn (h\xe0ng MB) trong m\u1ed9t key duy nh\u1ea5t. \u0110i\u1ec1u n\xe0y c\xf3 th\u1ec3 l\xe0m ch\u1eadm Redis, t\u0103ng \u0111\u1ed9 tr\u1ec5 m\u1ea1ng v\xe0 t\u1ed1n b\u1ed9 nh\u1edb."),(0,a.kt)("p",null,"N\u1ebfu c\u1ea7n l\u01b0u d\u1eef li\u1ec7u l\u1edbn, c\xe2n nh\u1eafc chia nh\u1ecf ho\u1eb7c l\u01b0u tr\u1eef \u1edf n\u01a1i kh\xe1c (nh\u01b0 S3) v\xe0 ch\u1ec9 l\u01b0u key/metadata trong Redis."),(0,a.kt)("h2",{id:"c\xe1c-ki\u1ec3u-setget-v\xe0-use-case-h\u1ee3p-l\xfd"},"C\xe1c Ki\u1ec3u SET/GET v\xe0 Use Case H\u1ee3p l\xfd"),(0,a.kt)("p",null,"Redis cung c\u1ea5p nhi\u1ec1u bi\u1ebfn th\u1ec3 c\u1ee7a l\u1ec7nh SET v\xe0 GET cho c\xe1c t\xecnh hu\u1ed1ng kh\xe1c nhau:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"SET key value: Ghi \u0111\xe8 gi\xe1 tr\u1ecb c\u1ee7a key n\u1ebfu n\xf3 \u0111\xe3 t\u1ed3n t\u1ea1i. D\xf9ng khi b\u1ea1n mu\u1ed1n c\u1eadp nh\u1eadt gi\xe1 tr\u1ecb m\u1ed9t c\xe1ch v\xf4 \u0111i\u1ec1u ki\u1ec7n.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"GET key: L\u1ea5y gi\xe1 tr\u1ecb c\u1ee7a key. Tr\u1ea3 v\u1ec1 nil n\u1ebfu key kh\xf4ng t\u1ed3n\xa0t\u1ea1i. D\xf9ng \u0111\u1ec3 \u0111\u1ecdc d\u1eef li\u1ec7u.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"SETNX key value (SET if Not eXists): Ch\u1ec9 \u0111\u1eb7t gi\xe1 tr\u1ecb n\u1ebfu key ch\u01b0a t\u1ed3n t\u1ea1i. Tr\u1ea3 v\u1ec1 1 n\u1ebfu th\xe0nh c\xf4ng, 0 n\u1ebfu key \u0111\xe3 t\u1ed3n t\u1ea1i."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Use Case: Tri\u1ec3n khai distributed lock c\u01a1 b\u1ea3n (c\u1ea7n k\u1ebft h\u1ee3p v\u1edbi TTL), \u0111\u1ea3m b\u1ea3o m\u1ed9t t\xe1c v\u1ee5 ch\u1ec9 \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n b\u1edfi m\u1ed9t ti\u1ebfn tr\xecnh t\u1ea1i m\u1ed9t th\u1eddi \u0111i\u1ec3m."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"SETEX key seconds value / PSETEX key milliseconds value: \u0110\u1eb7t gi\xe1 tr\u1ecb v\xe0 t\u1ef1 \u0111\u1ed9ng g\xe1n TTL (t\xednh b\u1eb1ng gi\xe2y ho\u1eb7c mili gi\xe2y)."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Use Case: Caching l\xe0 tr\u01b0\u1eddng h\u1ee3p s\u1eed d\u1ee5ng ch\xednh. \u0110\u1ea3m b\u1ea3o cache t\u1ef1 \u0111\u1ed9ng h\u1ebft h\u1ea1n."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"SET key value ","[EX seconds | PX milliseconds][NX | XX]",": L\u1ec7nh SET hi\u1ec7n \u0111\u1ea1i, k\u1ebft h\u1ee3p nhi\u1ec1u ch\u1ee9c n\u0103ng:"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"EX seconds / PX milliseconds: T\u01b0\u01a1ng t\u1ef1 SETEX/PSETEX.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"NX: T\u01b0\u01a1ng t\u1ef1 SETNX.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"XX: Ch\u1ec9 \u0111\u1eb7t gi\xe1 tr\u1ecb n\u1ebfu key \u0111\xe3 t\u1ed3n t\u1ea1i. D\xf9ng khi b\u1ea1n ch\u1ec9 mu\u1ed1n c\u1eadp nh\u1eadt key hi\u1ec7n c\xf3, kh\xf4ng t\u1ea1o key m\u1edbi.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Khuy\u1ebfn ngh\u1ecb: N\xean s\u1eed d\u1ee5ng l\u1ec7nh SET v\u1edbi c\xe1c t\xf9y ch\u1ecdn n\xe0y thay v\xec c\xe1c l\u1ec7nh c\u0169 nh\u01b0 SETNX, SETEX v\xec n\xf3 nguy\xean t\u1eed h\u01a1n (v\xed d\u1ee5: SET key value NX EX ttl \u0111\u1ea3m b\u1ea3o c\u1ea3 vi\u1ec7c ki\u1ec3m tra t\u1ed3n t\u1ea1i v\xe0 \u0111\u1eb7t TTL x\u1ea3y ra trong m\u1ed9t b\u01b0\u1edbc).")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"MSET key value ","[key value ...]",": \u0110\u1eb7t gi\xe1 tr\u1ecb cho nhi\u1ec1u key c\xf9ng l\xfac m\u1ed9t c\xe1ch nguy\xean t\u1eed."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Use Case: C\u1eadp nh\u1eadt nhi\u1ec1u th\xf4ng tin li\xean quan c\xf9ng l\xfac, hi\u1ec7u qu\u1ea3 h\u01a1n nhi\u1ec1u l\u1ec7nh SET ri\xeang l\u1ebb."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"MGET key ","[key ...]",": L\u1ea5y gi\xe1 tr\u1ecb c\u1ee7a nhi\u1ec1u key c\xf9ng l\xfac."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Use Case: L\u1ea5y nhi\u1ec1u m\u1ee5c cache ho\u1eb7c th\xf4ng tin li\xean quan trong m\u1ed9t l\u01b0\u1ee3t truy v\u1ea5n, gi\u1ea3m network round trips.")))))}g.isMDXComponent=!0}}]);