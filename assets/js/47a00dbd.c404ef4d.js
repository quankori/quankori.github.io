"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[88],{3905:(t,n,e)=>{e.d(n,{Zo:()=>p,kt:()=>m});var c=e(7294);function i(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function a(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);n&&(c=c.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,c)}return e}function l(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?a(Object(e),!0).forEach((function(n){i(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function r(t,n){if(null==t)return{};var e,c,i=function(t,n){if(null==t)return{};var e,c,i={},a=Object.keys(t);for(c=0;c<a.length;c++)e=a[c],n.indexOf(e)>=0||(i[e]=t[e]);return i}(t,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(c=0;c<a.length;c++)e=a[c],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(i[e]=t[e])}return i}var h=c.createContext({}),o=function(t){var n=c.useContext(h),e=n;return t&&(e="function"==typeof t?t(n):l(l({},n),t)),e},p=function(t){var n=o(t.components);return c.createElement(h.Provider,{value:n},t.children)},u="mdxType",g={inlineCode:"code",wrapper:function(t){var n=t.children;return c.createElement(c.Fragment,{},n)}},s=c.forwardRef((function(t,n){var e=t.components,i=t.mdxType,a=t.originalType,h=t.parentName,p=r(t,["components","mdxType","originalType","parentName"]),u=o(e),s=i,m=u["".concat(h,".").concat(s)]||u[s]||g[s]||a;return e?c.createElement(m,l(l({ref:n},p),{},{components:e})):c.createElement(m,l({ref:n},p))}));function m(t,n){var e=arguments,i=n&&n.mdxType;if("string"==typeof t||i){var a=e.length,l=new Array(a);l[0]=s;var r={};for(var h in n)hasOwnProperty.call(n,h)&&(r[h]=n[h]);r.originalType=t,r[u]="string"==typeof t?t:i,l[1]=r;for(var o=2;o<a;o++)l[o]=e[o];return c.createElement.apply(null,l)}return c.createElement.apply(null,e)}s.displayName="MDXCreateElement"},4056:(t,n,e)=>{e.r(n),e.d(n,{assets:()=>h,contentTitle:()=>l,default:()=>g,frontMatter:()=>a,metadata:()=>r,toc:()=>o});var c=e(7462),i=(e(7294),e(3905));const a={title:"Node.js"},l=void 0,r={unversionedId:"blog/programming/nodejs",id:"blog/programming/nodejs",title:"Node.js",description:"Ki\u1ebfn Tr\xfac C\u1ed1t L\xf5i (Core Architecture)",source:"@site/docs/blog/programming/nodejs.md",sourceDirName:"blog/programming",slug:"/blog/programming/nodejs",permalink:"/blog/programming/nodejs",draft:!1,tags:[],version:"current",frontMatter:{title:"Node.js"},sidebar:"blog",previous:{title:"Database",permalink:"/blog/system-design/database"},next:{title:"Golang",permalink:"/blog/programming/golang"}},h={},o=[{value:"Ki\u1ebfn Tr\xfac C\u1ed1t L\xf5i (Core Architecture)",id:"ki\u1ebfn-tr\xfac-c\u1ed1t-l\xf5i-core-architecture",level:2},{value:"M\xf4 H\xecnh H\u01b0\u1edbng S\u1ef1 Ki\u1ec7n v\xe0 Event Loop",id:"m\xf4-h\xecnh-h\u01b0\u1edbng-s\u1ef1-ki\u1ec7n-v\xe0-event-loop",level:3},{value:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng:",id:"c\xe1ch-ho\u1ea1t-\u0111\u1ed9ng",level:4},{value:"C\xe1c Pha Ch\xednh c\u1ee7a Event Loop (theo libuv):",id:"c\xe1c-pha-ch\xednh-c\u1ee7a-event-loop-theo-libuv",level:4},{value:"V8 Engine",id:"v8-engine",level:3},{value:"Module System",id:"module-system",level:3},{value:"Garbage Collection (GC)",id:"garbage-collection-gc",level:2},{value:"Young Generation (Th\u1ebf h\u1ec7 tr\u1ebb):",id:"young-generation-th\u1ebf-h\u1ec7-tr\u1ebb",level:3},{value:"Old Generation (Th\u1ebf h\u1ec7 gi\xe0):",id:"old-generation-th\u1ebf-h\u1ec7-gi\xe0",level:3},{value:"T\u1ed1i \u01afu H\xf3a Hi\u1ec7u N\u0103ng (Performance Optimization)",id:"t\u1ed1i-\u01b0u-h\xf3a-hi\u1ec7u-n\u0103ng-performance-optimization",level:2},{value:"Callback, Callback Hell, v\xe0 Async/Await Chuy\xean S\xe2u",id:"callback-callback-hell-v\xe0-asyncawait-chuy\xean-s\xe2u",level:2},{value:"Callbacks",id:"callbacks",level:3},{value:"Callback Hell (Pyramid of Doom)",id:"callback-hell-pyramid-of-doom",level:3},{value:"Promises",id:"promises",level:3},{value:"Async/Await Chuy\xean S\xe2u",id:"asyncawait-chuy\xean-s\xe2u",level:3},{value:"Scaling trong Node.js",id:"scaling-trong-nodejs",level:3},{value:"Child Processes (child_process module)",id:"child-processes-child_process-module",level:3},{value:"Worker Threads (worker_threads module)",id:"worker-threads-worker_threads-module",level:3},{value:"Cluster (cluster module)",id:"cluster-cluster-module",level:3},{value:"RxJS v\xe0 L\u1eadp Tr\xecnh Ph\u1ea3n \u1ee9ng (Reactive Programming) Chuy\xean S\xe2u",id:"rxjs-v\xe0-l\u1eadp-tr\xecnh-ph\u1ea3n-\u1ee9ng-reactive-programming-chuy\xean-s\xe2u",level:2},{value:"C\xe1c Kh\xe1i Ni\u1ec7m C\u1ed1t L\xf5i",id:"c\xe1c-kh\xe1i-ni\u1ec7m-c\u1ed1t-l\xf5i",level:3},{value:"T\u1ea1i Sao D\xf9ng RxJS trong Node.js?",id:"t\u1ea1i-sao-d\xf9ng-rxjs-trong-nodejs",level:3},{value:"So S\xe1nh v\u1edbi Promises/Async/Await",id:"so-s\xe1nh-v\u1edbi-promisesasyncawait",level:3},{value:"Chuy\xean S\xe2u v\u1ec1 Scope trong JavaScript (v\xe0 TypeScript)",id:"chuy\xean-s\xe2u-v\u1ec1-scope-trong-javascript-v\xe0-typescript",level:2},{value:"Global Scope",id:"global-scope",level:4},{value:"Function Scope",id:"function-scope",level:4},{value:"Block Scope",id:"block-scope",level:4},{value:"Lexical Scope (Static Scope)",id:"lexical-scope-static-scope",level:4},{value:"Scope Chain",id:"scope-chain",level:4}],p={toc:o},u="wrapper";function g(t){let{components:n,...e}=t;return(0,i.kt)(u,(0,c.Z)({},p,e,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"ki\u1ebfn-tr\xfac-c\u1ed1t-l\xf5i-core-architecture"},"Ki\u1ebfn Tr\xfac C\u1ed1t L\xf5i (Core Architecture)"),(0,i.kt)("p",null,"Node.js kh\xf4ng ph\u1ea3i l\xe0 m\u1ed9t ng\xf4n ng\u1eef l\u1eadp tr\xecnh m\u1edbi, m\xe0 l\xe0 m\u1ed9t m\xf4i tr\u01b0\u1eddng th\u1ef1c thi JavaScript x\xe2y d\u1ef1ng tr\xean V8 JavaScript engine c\u1ee7a Chrome. Ki\u1ebfn tr\xfac c\u1ee7a n\xf3 \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf \u0111\u1ec3 x\u1eed l\xfd hi\u1ec7u qu\u1ea3 c\xe1c t\xe1c v\u1ee5 I/O."),(0,i.kt)("h3",{id:"m\xf4-h\xecnh-h\u01b0\u1edbng-s\u1ef1-ki\u1ec7n-v\xe0-event-loop"},"M\xf4 H\xecnh H\u01b0\u1edbng S\u1ef1 Ki\u1ec7n v\xe0 Event Loop"),(0,i.kt)("p",null,"Tr\xe1i tim c\u1ee7a Node.js l\xe0 Event Loop. N\xf3 cho ph\xe9p Node.js th\u1ef1c hi\u1ec7n non-blocking I/O m\u1eb7c d\xf9 JavaScript l\xe0 \u0111\u01a1n lu\u1ed3ng (single-threaded)."),(0,i.kt)("h4",{id:"c\xe1ch-ho\u1ea1t-\u0111\u1ed9ng"},"C\xe1ch ho\u1ea1t \u0111\u1ed9ng:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Client g\u1eedi y\xeau c\u1ea7u"),": Khi m\u1ed9t y\xeau c\u1ea7u \u0111\u1ebfn (v\xed d\u1ee5: \u0111\u1ecdc file, truy v\u1ea5n database), Node.js \u0111\u1eb7t y\xeau c\u1ea7u \u0111\xf3 v\xe0o h\xe0ng \u0111\u1ee3i (queue).")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Giao cho h\u1ec7 \u0111i\u1ec1u h\xe0nh"),": Node.js kh\xf4ng t\u1ef1 m\xecnh th\u1ef1c hi\u1ec7n t\xe1c v\u1ee5 I/O. Thay v\xe0o \u0111\xf3, n\xf3 s\u1eed d\u1ee5ng th\u01b0 vi\u1ec7n libuv \u0111\u1ec3 giao t\xe1c v\u1ee5 \u0111\xf3 cho h\u1ec7 \u0111i\u1ec1u h\xe0nh (OS). H\u1ec7 \u0111i\u1ec1u h\xe0nh c\xf3 th\u1ec3 s\u1eed d\u1ee5ng c\xe1c c\u01a1 ch\u1ebf \u0111a lu\u1ed3ng ri\xeang \u0111\u1ec3 x\u1eed l\xfd hi\u1ec7u qu\u1ea3.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Ti\u1ebfp t\u1ee5c x\u1eed l\xfd"),": Trong khi OS \u0111ang x\u1eed l\xfd t\xe1c v\u1ee5 I/O, Event Loop kh\xf4ng b\u1ecb ch\u1eb7n. N\xf3 ti\u1ebfp t\u1ee5c quay v\xf2ng, ki\u1ec3m tra xem c\xf3 s\u1ef1 ki\u1ec7n n\xe0o kh\xe1c c\u1ea7n x\u1eed l\xfd kh\xf4ng (v\xed d\u1ee5: y\xeau c\u1ea7u m\u1edbi, timer h\u1ebft h\u1ea1n).")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Callback \u0111\u01b0\u1ee3c k\xedch ho\u1ea1t"),": Khi OS ho\xe0n th\xe0nh t\xe1c v\u1ee5 I/O, n\xf3 th\xf4ng b\xe1o cho Node.js. Event Loop nh\u1eadn \u0111\u01b0\u1ee3c th\xf4ng b\xe1o n\xe0y v\xe0 \u0111\u01b0a h\xe0m callback t\u01b0\u01a1ng \u1ee9ng v\u1edbi t\xe1c v\u1ee5 \u0111\xe3 ho\xe0n th\xe0nh v\xe0o Poll Queue (ho\u1eb7c c\xe1c queue kh\xe1c t\xf9y pha).")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"T",(0,i.kt)("strong",{parentName:"p"},"h\u1ef1c thi Callback"),": Khi Call Stack tr\u1ed1ng, Event Loop l\u1ea5y callback t\u1eeb Poll Queue (ho\u1eb7c c\xe1c queue kh\xe1c) v\xe0 \u0111\u1ea9y v\xe0o Call Stack \u0111\u1ec3 th\u1ef1c thi."))),(0,i.kt)("h4",{id:"c\xe1c-pha-ch\xednh-c\u1ee7a-event-loop-theo-libuv"},"C\xe1c Pha Ch\xednh c\u1ee7a Event Loop (theo libuv):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Timers: Th\u1ef1c thi c\xe1c callback \u0111\u01b0\u1ee3c l\xean l\u1ecbch b\u1edfi setTimeout() v\xe0 setInterval().")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Pending Callbacks: Th\u1ef1c thi c\xe1c callback I/O b\u1ecb tr\xec ho\xe3n \u0111\u1ebfn v\xf2ng l\u1eb7p ti\u1ebfp theo.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Idle, Prepare: Ch\u1ec9 s\u1eed d\u1ee5ng n\u1ed9i b\u1ed9.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Poll: Truy xu\u1ea5t c\xe1c s\u1ef1 ki\u1ec7n I/O m\u1edbi; th\u1ef1c thi c\xe1c callback li\xean quan \u0111\u1ebfn I/O (h\u1ea7u h\u1ebft c\xe1c callback, tr\u1eeb close callbacks, timers, v\xe0 setImmediate). Node.js c\xf3 th\u1ec3 ch\u1eb7n \u1edf pha n\xe0y n\u1ebfu kh\xf4ng c\xf3 g\xec kh\xe1c \u0111\u1ec3 l\xe0m.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Check: Th\u1ef1c thi c\xe1c callback c\u1ee7a setImmediate().")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Close Callbacks: Th\u1ef1c thi c\xe1c callback \u0111\xf3ng (v\xed d\u1ee5: socket.on('close', ...))."))),(0,i.kt)("h3",{id:"v8-engine"},"V8 Engine"),(0,i.kt)("p",null,"V8 l\xe0 engine JavaScript m\xe3 ngu\u1ed3n m\u1edf hi\u1ec7u n\u0103ng cao c\u1ee7a Google, \u0111\u01b0\u1ee3c vi\u1ebft b\u1eb1ng C++. Node.js s\u1eed d\u1ee5ng V8 \u0111\u1ec3 bi\xean d\u1ecbch m\xe3 JavaScript th\xe0nh m\xe3 m\xe1y g\u1ed1c."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Call Stack"),": N\u01a1i c\xe1c frame th\u1ef1c thi h\xe0m \u0111\u01b0\u1ee3c \u0111\u1ea9y v\xe0o v\xe0 l\u1ea5y ra (LIFO - Last In, First Out).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Memory Heap"),": N\u01a1i c\u1ea5p ph\xe1t b\u1ed9 nh\u1edb cho c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng v\xe0 bi\u1ebfn. Garbage Collection (GC) di\u1ec5n ra \u1edf \u0111\xe2y."))),(0,i.kt)("h3",{id:"module-system"},"Module System"),(0,i.kt)("p",null,"Node.js c\xf3 hai h\u1ec7 th\u1ed1ng module ch\xednh:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"CommonJS (CJS)"),": H\u1ec7 th\u1ed1ng module m\u1eb7c \u0111\u1ecbnh trong l\u1ecbch s\u1eed Node.js. S\u1eed d\u1ee5ng require() \u0111\u1ec3 nh\u1eadp v\xe0 module.exports ho\u1eb7c exports \u0111\u1ec3 xu\u1ea5t. \u0110\u1ed3ng b\u1ed9.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"ES Modules (ESM)"),': Chu\u1ea9n module ch\xednh th\u1ee9c c\u1ee7a JavaScript. S\u1eed d\u1ee5ng import v\xe0 export. B\u1ea5t \u0111\u1ed3ng b\u1ed9. Node.js h\u1ed7 tr\u1ee3 ESM th\xf4ng qua \u0111u\xf4i file .mjs ho\u1eb7c c\u1ea5u h\xecnh "type": "module" trong package.json.'))),(0,i.kt)("h2",{id:"garbage-collection-gc"},"Garbage Collection (GC)"),(0,i.kt)("p",null,"GC l\xe0 qu\xe1 tr\xecnh t\u1ef1 \u0111\u1ed9ng thu h\u1ed3i b\u1ed9 nh\u1edb kh\xf4ng c\xf2n \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng. V8 s\u1eed d\u1ee5ng chi\u1ebfn l\u01b0\u1ee3c Generational Collection:"),(0,i.kt)("h3",{id:"young-generation-th\u1ebf-h\u1ec7-tr\u1ebb"},"Young Generation (Th\u1ebf h\u1ec7 tr\u1ebb):"),(0,i.kt)("p",null,"H\u1ea7u h\u1ebft c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng \u0111\u01b0\u1ee3c t\u1ea1o ra \u1edf \u0111\xe2y."),(0,i.kt)("p",null,'Kh\xf4ng gian nh\u1ecf, chia th\xe0nh "from-space" v\xe0 "to-space".'),(0,i.kt)("p",null,"S\u1eed d\u1ee5ng thu\u1eadt to\xe1n Scavenge (Copying Collector):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},'Khi "from-space" \u0111\u1ea7y, GC b\u1eaft \u0111\u1ea7u.')),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},'N\xf3 qu\xe9t c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng c\xf2n s\u1ed1ng trong "from-space".')),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},'C\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng c\xf2n s\u1ed1ng \u0111\u01b0\u1ee3c sao ch\xe9p sang "to-space".')),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},'C\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng \u0111\xe3 s\u1ed1ng s\xf3t qua m\u1ed9t (ho\u1eb7c hai) l\u1ea7n Scavenge s\u1ebd \u0111\u01b0\u1ee3c "th\u0103ng c\u1ea5p" l\xean Old Generation.')),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},'Sau khi sao ch\xe9p xong, "from-space" v\xe0 "to-space" \u0111\u1ed5i vai tr\xf2 cho nhau.'))),(0,i.kt)("p",null,"Qu\xe1 tr\xecnh n\xe0y nhanh nh\u01b0ng t\u1ed1n g\u1ea5p \u0111\xf4i b\u1ed9 nh\u1edb (do c\u1ea7n 2 space)."),(0,i.kt)("h3",{id:"old-generation-th\u1ebf-h\u1ec7-gi\xe0"},"Old Generation (Th\u1ebf h\u1ec7 gi\xe0):"),(0,i.kt)("p",null,"Ch\u1ee9a c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng \u0111\xe3 s\u1ed1ng s\xf3t qua Young Generation ho\u1eb7c c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng l\u1edbn."),(0,i.kt)("p",null,"S\u1eed d\u1ee5ng thu\u1eadt to\xe1n Mark-Sweep & Mark-Compact:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Marking (\u0110\xe1nh d\u1ea5u): B\u1eaft \u0111\u1ea7u t\u1eeb c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng g\u1ed1c (root objects - v\xed d\u1ee5: bi\u1ebfn to\xe0n c\u1ee5c, stack), GC duy\u1ec7t qua \u0111\u1ed3 th\u1ecb \u0111\u1ed1i t\u01b0\u1ee3ng v\xe0 \u0111\xe1nh d\u1ea5u t\u1ea5t c\u1ea3 c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng c\xf3 th\u1ec3 truy c\u1eadp \u0111\u01b0\u1ee3c (c\xf2n s\u1ed1ng).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Sweeping (Qu\xe9t): GC qu\xe9t qua to\xe0n b\u1ed9 Heap v\xe0 thu h\u1ed3i b\u1ed9 nh\u1edb c\u1ee7a c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng kh\xf4ng \u0111\u01b0\u1ee3c \u0111\xe1nh d\u1ea5u (r\xe1c).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Compacting (N\xe9n - t\xf9y ch\u1ecdn): Sau khi qu\xe9t, b\u1ed9 nh\u1edb c\xf3 th\u1ec3 b\u1ecb ph\xe2n m\u1ea3nh. GC di chuy\u1ec3n c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng c\xf2n s\u1ed1ng l\u1ea1i g\u1ea7n nhau \u0111\u1ec3 gi\u1ea3m ph\xe2n m\u1ea3nh v\xe0 c\u1ea3i thi\u1ec7n hi\u1ec7u qu\u1ea3 c\u1ea5p ph\xe1t b\u1ed9 nh\u1edb sau n\xe0y. Qu\xe1 tr\xecnh n\xe0y t\u1ed1n th\u1eddi gian h\u01a1n."))),(0,i.kt)("p",null,'GC \u1edf Old Generation di\u1ec5n ra \xedt th\u01b0\u1eddng xuy\xean h\u01a1n nh\u01b0ng t\u1ed1n th\u1eddi gian h\u01a1n ("stop-the-world" - t\u1ea1m d\u1eebng th\u1ef1c thi JavaScript).'),(0,i.kt)("h2",{id:"t\u1ed1i-\u01b0u-h\xf3a-hi\u1ec7u-n\u0103ng-performance-optimization"},"T\u1ed1i \u01afu H\xf3a Hi\u1ec7u N\u0103ng (Performance Optimization)"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"S\u1eed d\u1ee5ng Non-blocking I/O"),": T\u1eadn d\u1ee5ng t\u1ed1i \u0111a b\u1ea3n ch\u1ea5t b\u1ea5t \u0111\u1ed3ng b\u1ed9 c\u1ee7a Node.js. S\u1eed d\u1ee5ng async/await ho\u1eb7c Promises thay v\xec c\xe1c h\xe0m \u0111\u1ed3ng b\u1ed9 (v\xed d\u1ee5: fs.readFileSync)."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Streams"),": S\u1eed d\u1ee5ng streams (fs.createReadStream, fs.createWriteStream) \u0111\u1ec3 x\u1eed l\xfd d\u1eef li\u1ec7u l\u1edbn m\xe0 kh\xf4ng c\u1ea7n t\u1ea3i to\xe0n b\u1ed9 v\xe0o b\u1ed9 nh\u1edb."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Caching"),": L\u01b0u tr\u1eef c\xe1c k\u1ebft qu\u1ea3 t\xednh to\xe1n ho\u1eb7c d\u1eef li\u1ec7u th\u01b0\u1eddng xuy\xean truy c\u1eadp (v\xed d\u1ee5: s\u1eed d\u1ee5ng Redis, Memcached ho\u1eb7c caching trong b\u1ed9 nh\u1edb)."),(0,i.kt)("p",null,"T\u1ed1i \u01b0u h\xf3a Code:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Gi\u1ea3m c\xe1c v\xf2ng l\u1eb7p l\u1ed3ng nhau ph\u1ee9c t\u1ea1p.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"S\u1eed d\u1ee5ng c\xe1c c\u1ea5u tr\xfac d\u1eef li\u1ec7u hi\u1ec7u qu\u1ea3 (v\xed d\u1ee5: Map, Set).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Tr\xe1nh c\u1ea5p ph\xe1t b\u1ed9 nh\u1edb kh\xf4ng c\u1ea7n thi\u1ebft trong c\xe1c v\xf2ng l\u1eb7p ho\u1eb7c h\xe0m ch\u1ea1y th\u01b0\u1eddng xuy\xean."))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Worker Threads"),": S\u1eed d\u1ee5ng worker_threads \u0111\u1ec3 ch\u1ea1y c\xe1c t\xe1c v\u1ee5 n\u1eb7ng v\u1ec1 CPU (v\xed d\u1ee5: m\xe3 h\xf3a, x\u1eed l\xfd \u1ea3nh) tr\xean c\xe1c lu\u1ed3ng ri\xeang bi\u1ec7t m\xe0 kh\xf4ng ch\u1eb7n Event Loop ch\xednh."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Profiling & Monitoring"),": S\u1eed d\u1ee5ng c\xe1c c\xf4ng c\u1ee5 nh\u01b0 node --inspect, Chrome DevTools, clinic.js, New Relic, Datadog \u0111\u1ec3 x\xe1c \u0111\u1ecbnh c\xe1c \u0111i\u1ec3m ngh\u1ebdn c\u1ed5 chai (bottlenecks) v\xe0 r\xf2 r\u1ec9 b\u1ed9 nh\u1edb (memory leaks)."),(0,i.kt)("p",null,"T\u1ed1i \u01b0u h\xf3a GC:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Tr\xe1nh t\u1ea1o qu\xe1 nhi\u1ec1u \u0111\u1ed1i t\u01b0\u1ee3ng t\u1ed3n t\u1ea1i ng\u1eafn h\u1ea1n.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"S\u1eed d\u1ee5ng Object Pooling n\u1ebfu h\u1ee3p l\xfd."))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"S\u1eed d\u1ee5ng phi\xean b\u1ea3n Node.js v\xe0 V8 m\u1edbi nh\u1ea5t"),": Th\u01b0\u1eddng xuy\xean c\xf3 c\xe1c c\u1ea3i ti\u1ebfn v\u1ec1 hi\u1ec7u n\u0103ng."),(0,i.kt)("h2",{id:"callback-callback-hell-v\xe0-asyncawait-chuy\xean-s\xe2u"},"Callback, Callback Hell, v\xe0 Async/Await Chuy\xean S\xe2u"),(0,i.kt)("h3",{id:"callbacks"},"Callbacks"),(0,i.kt)("p",null,"Callback l\xe0 m\u1ed9t h\xe0m \u0111\u01b0\u1ee3c truy\u1ec1n v\xe0o m\u1ed9t h\xe0m kh\xe1c nh\u01b0 m\u1ed9t \u0111\u1ed1i s\u1ed1, v\xe0 \u0111\u01b0\u1ee3c g\u1ecdi l\u1ea1i (executed) sau khi m\u1ed9t t\xe1c v\u1ee5 n\xe0o \u0111\xf3 ho\xe0n th\xe0nh (th\u01b0\u1eddng l\xe0 t\xe1c v\u1ee5 b\u1ea5t \u0111\u1ed3ng b\u1ed9)."),(0,i.kt)("h3",{id:"callback-hell-pyramid-of-doom"},"Callback Hell (Pyramid of Doom)"),(0,i.kt)("p",null,"Khi c\xf3 nhi\u1ec1u t\xe1c v\u1ee5 b\u1ea5t \u0111\u1ed3ng b\u1ed9 ph\u1ee5 thu\u1ed9c l\u1eabn nhau, vi\u1ec7c l\u1ed3ng c\xe1c callback v\xe0o nhau d\u1eabn \u0111\u1ebfn m\xe3 kh\xf3 \u0111\u1ecdc, kh\xf3 b\u1ea3o tr\xec v\xe0 d\u1ec5 l\u1ed7i."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'// Example of Callback Hell (Conceptual)\ngetData(\n  id,\n  (data) => {\n    processData(\n      data,\n      (processed) => {\n        saveData(\n          processed,\n          (result) => {\n            logResult(\n              result,\n              (status) => {\n                console.log("All done!", status);\n              },\n              (err) => {\n                console.error("Logging failed:", err);\n              }\n            );\n          },\n          (err) => {\n            console.error("Saving failed:", err);\n          }\n        );\n      },\n      (err) => {\n        console.error("Processing failed:", err);\n      }\n    );\n  },\n  (err) => {\n    console.error("Getting data failed:", err);\n  }\n);\n')),(0,i.kt)("h3",{id:"promises"},"Promises"),(0,i.kt)("p",null,'Promises cung c\u1ea5p m\u1ed9t c\xe1ch c\u1ea5u tr\xfac m\xe3 b\u1ea5t \u0111\u1ed3ng b\u1ed9 t\u1ed1t h\u01a1n, tr\xe1nh Callback Hell b\u1eb1ng c\xe1ch cho ph\xe9p "chaining" (n\u1ed1i chu\u1ed7i) c\xe1c h\xe0nh \u0111\u1ed9ng .then() v\xe0 x\u1eed l\xfd l\u1ed7i t\u1eadp trung qua .catch().'),(0,i.kt)("h3",{id:"asyncawait-chuy\xean-s\xe2u"},"Async/Await Chuy\xean S\xe2u"),(0,i.kt)("p",null,"async/await l\xe0 c\xfa ph\xe1p \u0111\u01b0\u1ee3c x\xe2y d\u1ef1ng tr\xean Promises, gi\xfap vi\u1ebft m\xe3 b\u1ea5t \u0111\u1ed3ng b\u1ed9 tr\xf4ng gi\u1ed1ng nh\u01b0 m\xe3 \u0111\u1ed3ng b\u1ed9, d\u1ec5 \u0111\u1ecdc v\xe0 d\u1ec5 hi\u1ec3u h\u01a1n r\u1ea5t nhi\u1ec1u."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"async function: Khai b\xe1o m\u1ed9t h\xe0m lu\xf4n tr\u1ea3 v\u1ec1 m\u1ed9t Promise. N\u1ebfu h\xe0m tr\u1ea3 v\u1ec1 m\u1ed9t gi\xe1 tr\u1ecb kh\xf4ng ph\u1ea3i Promise, n\xf3 s\u1ebd t\u1ef1 \u0111\u1ed9ng \u0111\u01b0\u1ee3c b\u1ecdc trong m\u1ed9t Promise \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft (resolved).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"await operator: Ch\u1ec9 c\xf3 th\u1ec3 s\u1eed d\u1ee5ng b\xean trong m\u1ed9t async function. N\xf3 t\u1ea1m d\u1eebng vi\u1ec7c th\u1ef1c thi c\u1ee7a async function cho \u0111\u1ebfn khi Promise theo sau await \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft (settled - resolved ho\u1eb7c rejected)."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"N\u1ebfu Promise \u0111\u01b0\u1ee3c resolved, await tr\u1ea3 v\u1ec1 gi\xe1 tr\u1ecb \u0111\xe3 resolved.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"N\u1ebfu Promise b\u1ecb rejected, await n\xe9m ra (throws) l\u1ed7i \u0111\xe3 rejected.")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"C\xe1ch ho\u1ea1t \u0111\u1ed9ng b\xean d\u01b0\u1edbi (Under the Hood):"))),(0,i.kt)("p",null,'async/await th\u1ef1c ch\u1ea5t l\xe0 "syntactic sugar" (c\xfa ph\xe1p ti\u1ec7n l\u1ee3i) cho Generators v\xe0 Promises. Khi V8 (ho\u1eb7c tr\xecnh bi\xean d\u1ecbch TypeScript/Babel) g\u1eb7p async function, n\xf3 bi\u1ebfn \u0111\u1ed5i h\xe0m \u0111\xf3 th\xe0nh m\u1ed9t d\u1ea1ng state machine (m\xe1y tr\u1ea1ng th\xe1i) s\u1eed d\u1ee5ng generators (function',"*"," v\xe0 yield)."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Khi async function \u0111\u01b0\u1ee3c g\u1ecdi, n\xf3 tr\u1ea3 v\u1ec1 m\u1ed9t Promise ngay l\u1eadp t\u1ee9c.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Khi g\u1eb7p await somePromise, h\xe0m t\u1ea1m d\u1eebng (yield).")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Khi somePromise \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft, Event Loop s\u1ebd l\xean l\u1ecbch \u0111\u1ec3 h\xe0m ti\u1ebfp t\u1ee5c th\u1ef1c thi t\u1eeb \u0111i\u1ec3m d\u1eebng. Gi\xe1 tr\u1ecb resolved \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 t\u1eeb yield.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"N\u1ebfu somePromise b\u1ecb reject, l\u1ed7i s\u1ebd \u0111\u01b0\u1ee3c n\xe9m ra t\u1ea1i \u0111i\u1ec3m await, c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c b\u1eaft b\u1edfi try...catch.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Khi h\xe0m th\u1ef1c thi xong (return ho\u1eb7c h\u1ebft code), Promise m\xe0 n\xf3 tr\u1ea3 v\u1ec1 ban \u0111\u1ea7u s\u1ebd \u0111\u01b0\u1ee3c resolve v\u1edbi gi\xe1 tr\u1ecb return. N\u1ebfu c\xf3 l\u1ed7i kh\xf4ng \u0111\u01b0\u1ee3c b\u1eaft, Promise s\u1ebd b\u1ecb reject."))),(0,i.kt)("p",null,"S\u1ef1 t\u01b0\u01a1ng t\xe1c v\u1edbi Event Loop: await kh\xf4ng ch\u1eb7n Event Loop. N\xf3 ch\u1ec9 t\u1ea1m d\u1eebng vi\u1ec7c th\u1ef1c thi c\u1ee7a ch\xednh h\xe0m async \u0111\xf3. Event Loop v\u1eabn ti\u1ebfp t\u1ee5c ch\u1ea1y v\xe0 x\u1eed l\xfd c\xe1c s\u1ef1 ki\u1ec7n kh\xe1c trong khi ch\u1edd Promise \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft. Khi Promise gi\u1ea3i quy\u1ebft, vi\u1ec7c ti\u1ebfp t\u1ee5c th\u1ef1c thi h\xe0m async \u0111\u01b0\u1ee3c \u0111\u01b0a v\xe0o h\xe0ng \u0111\u1ee3i (Microtask Queue, \u01b0u ti\xean h\u01a1n Macrotask Queue/Callback Queue) v\xe0 s\u1ebd ch\u1ea1y ngay khi Call Stack tr\u1ed1ng."),(0,i.kt)("h3",{id:"scaling-trong-nodejs"},"Scaling trong Node.js"),(0,i.kt)("p",null,"Node.js ch\u1ea1y tr\xean m\u1ed9t lu\u1ed3ng ch\xednh duy nh\u1ea5t. \u0110\u1ec3 t\u1eadn d\u1ee5ng c\xe1c h\u1ec7 th\u1ed1ng \u0111a l\xf5i v\xe0 x\u1eed l\xfd t\u1ea3i cao, c\u1ea7n c\xf3 c\xe1c chi\u1ebfn l\u01b0\u1ee3c scaling:"),(0,i.kt)("h3",{id:"child-processes-child_process-module"},"Child Processes (child_process module)"),(0,i.kt)("p",null,"Cho ph\xe9p t\u1ea1o ra c\xe1c ti\u1ebfn tr\xecnh (process) con ri\xeang bi\u1ec7t. M\u1ed7i ti\u1ebfn tr\xecnh con c\xf3 b\u1ed9 nh\u1edb v\xe0 Event Loop ri\xeang."),(0,i.kt)("p",null,"spawn(): T\u1ed1t cho lu\u1ed3ng d\u1eef li\u1ec7u l\u1edbn (streams)."),(0,i.kt)("p",null,"exec(): T\u1ed1t cho ch\u1ea1y c\xe1c l\u1ec7nh shell, c\xf3 buffer."),(0,i.kt)("p",null,"execFile(): T\u01b0\u01a1ng t\u1ef1 exec nh\u01b0ng ch\u1ea1y file th\u1ef1c thi tr\u1ef1c ti\u1ebfp, an to\xe0n h\u01a1n."),(0,i.kt)("p",null,"fork(): M\u1ed9t d\u1ea1ng \u0111\u1eb7c bi\u1ec7t c\u1ee7a spawn, t\u1ea1o ra m\u1ed9t ti\u1ebfn tr\xecnh Node.js m\u1edbi v\xe0 cho ph\xe9p giao ti\u1ebfp hai chi\u1ec1u qua IPC (Inter-Process Communication). Th\u01b0\u1eddng d\xf9ng v\u1edbi cluster."),(0,i.kt)("p",null,"H\u1eefu \xedch cho vi\u1ec7c ch\u1ea1y c\xe1c script b\xean ngo\xe0i ho\u1eb7c t\xe1ch bi\u1ec7t c\xe1c ph\u1ea7n c\u1ee7a \u1ee9ng d\u1ee5ng."),(0,i.kt)("h3",{id:"worker-threads-worker_threads-module"},"Worker Threads (worker_threads module)"),(0,i.kt)("p",null,"Cho ph\xe9p ch\u1ea1y m\xe3 JavaScript song song tr\xean c\xe1c lu\u1ed3ng (thread) ri\xeang bi\u1ec7t trong c\xf9ng m\u1ed9t ti\u1ebfn tr\xecnh. C\xe1c lu\u1ed3ng chia s\u1ebb b\u1ed9 nh\u1edb hi\u1ec7u qu\u1ea3 h\u01a1n so v\u1edbi c\xe1c ti\u1ebfn tr\xecnh ri\xeang bi\u1ec7t (qua SharedArrayBuffer ho\u1eb7c postMessage)."),(0,i.kt)("p",null,"R\u1ea5t l\xfd t\u01b0\u1edfng cho c\xe1c t\xe1c v\u1ee5 CPU-bound (t\xednh to\xe1n n\u1eb7ng) m\xe0 kh\xf4ng mu\u1ed1n ch\u1eb7n Event Loop ch\xednh."),(0,i.kt)("p",null,"Kh\xf4ng n\xean d\xf9ng cho c\xe1c t\xe1c v\u1ee5 I/O-bound (Node.js \u0111\xe3 t\u1ed1i \u01b0u cho vi\u1ec7c n\xe0y b\u1eb1ng non-blocking I/O tr\xean lu\u1ed3ng ch\xednh)."),(0,i.kt)("h3",{id:"cluster-cluster-module"},"Cluster (cluster module)"),(0,i.kt)("p",null,"Cho ph\xe9p t\u1ea1o ra nhi\u1ec1u ti\u1ebfn tr\xecnh Node.js (workers) c\xf9ng l\u1eafng nghe tr\xean m\u1ed9t c\u1ed5ng m\u1ea1ng (port)."),(0,i.kt)("p",null,"M\u1ed9t Master Process \u0111\u01b0\u1ee3c t\u1ea1o ra \u0111\u1ea7u ti\xean."),(0,i.kt)("p",null,"Master Process s\u1eed d\u1ee5ng cluster.fork() \u0111\u1ec3 t\u1ea1o ra c\xe1c Worker Processes."),(0,i.kt)("p",null,"Master Process qu\u1ea3n l\xfd vi\u1ec7c ph\xe2n ph\u1ed1i c\xe1c k\u1ebft n\u1ed1i \u0111\u1ebfn (incoming connections) cho c\xe1c Worker Processes (th\u01b0\u1eddng theo ki\u1ec3u Round-robin)."),(0,i.kt)("p",null,"M\u1ed7i Worker Process l\xe0 m\u1ed9t ti\u1ebfn tr\xecnh Node.js \u0111\u1ed9c l\u1eadp v\u1edbi Event Loop ri\xeang."),(0,i.kt)("p",null,"Gi\xfap t\u1eadn d\u1ee5ng t\u1ed1i \u0111a c\xe1c l\xf5i CPU c\u1ee7a m\xe1y ch\u1ee7 \u0111\u1ec3 x\u1eed l\xfd nhi\u1ec1u y\xeau c\u1ea7u \u0111\u1ed3ng th\u1eddi. \u0110\xe2y l\xe0 c\xe1ch ph\u1ed5 bi\u1ebfn nh\u1ea5t \u0111\u1ec3 scale \u1ee9ng d\u1ee5ng Node.js tr\xean m\u1ed9t m\xe1y ch\u1ee7 duy nh\u1ea5t."),(0,i.kt)("h2",{id:"rxjs-v\xe0-l\u1eadp-tr\xecnh-ph\u1ea3n-\u1ee9ng-reactive-programming-chuy\xean-s\xe2u"},"RxJS v\xe0 L\u1eadp Tr\xecnh Ph\u1ea3n \u1ee9ng (Reactive Programming) Chuy\xean S\xe2u"),(0,i.kt)("p",null,"Ngo\xe0i Callbacks, Promises v\xe0 Async/Await, RxJS (Reactive Extensions for JavaScript) cung c\u1ea5p m\u1ed9t m\xf4 h\xecnh m\u1ea1nh m\u1ebd kh\xe1c \u0111\u1ec3 x\u1eed l\xfd c\xe1c lu\u1ed3ng d\u1eef li\u1ec7u v\xe0 s\u1ef1 ki\u1ec7n b\u1ea5t \u0111\u1ed3ng b\u1ed9: L\u1eadp tr\xecnh ph\u1ea3n \u1ee9ng."),(0,i.kt)("p",null,"RxJS xem c\xe1c s\u1ef1 ki\u1ec7n (click chu\u1ed9t, d\u1eef li\u1ec7u t\u1eeb API, tin nh\u1eafn WebSocket, timer,...) nh\u01b0 nh\u1eefng lu\u1ed3ng d\u1eef li\u1ec7u (streams) c\xf3 th\u1ec3 quan s\xe1t \u0111\u01b0\u1ee3c theo th\u1eddi gian."),(0,i.kt)("h3",{id:"c\xe1c-kh\xe1i-ni\u1ec7m-c\u1ed1t-l\xf5i"},"C\xe1c Kh\xe1i Ni\u1ec7m C\u1ed1t L\xf5i"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Observable: \u0110\u1ea1i di\u1ec7n cho m\u1ed9t t\u1eadp h\u1ee3p c\xe1c gi\xe1 tr\u1ecb ho\u1eb7c s\u1ef1 ki\u1ec7n trong t\u01b0\u01a1ng lai (m\u1ed9t stream). Observable l\xe0 lazy (ch\u1ec9 th\u1ef1c thi khi c\xf3 ai \u0111\xf3 \u0111\u0103ng k\xfd - subscribe) v\xe0 c\xf3 th\u1ec3 ph\xe1t ra nhi\u1ec1u gi\xe1 tr\u1ecb theo th\u1eddi gian (0 \u0111\u1ebfn v\xf4 h\u1ea1n). N\xf3 c\u0169ng c\xf3 th\u1ec3 b\u1ecb h\u1ee7y (cancel).")),(0,i.kt)("p",null,"Kh\xe1c v\u1edbi Promise: Promise ch\u1ec9 x\u1eed l\xfd m\u1ed9t gi\xe1 tr\u1ecb duy nh\u1ea5t (resolved ho\u1eb7c rejected) v\xe0 kh\xf4ng th\u1ec3 h\u1ee7y b\u1ecf sau khi \u0111\xe3 b\u1eaft \u0111\u1ea7u."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Observer: L\xe0 m\u1ed9t \u0111\u1ed1i t\u01b0\u1ee3ng c\xf3 c\xe1c h\xe0m callback \u0111\u1ec3 l\u1eafng nghe c\xe1c gi\xe1 tr\u1ecb \u0111\u01b0\u1ee3c ph\xe1t ra b\u1edfi Observable:")),(0,i.kt)("p",null,"next(value): \u0110\u01b0\u1ee3c g\u1ecdi m\u1ed7i khi Observable ph\xe1t ra m\u1ed9t gi\xe1 tr\u1ecb m\u1edbi."),(0,i.kt)("p",null,"error(err): \u0110\u01b0\u1ee3c g\u1ecdi n\u1ebfu Observable g\u1eb7p l\u1ed7i. Stream k\u1ebft th\xfac."),(0,i.kt)("p",null,"complete(): \u0110\u01b0\u1ee3c g\u1ecdi khi Observable ho\xe0n th\xe0nh vi\u1ec7c ph\xe1t gi\xe1 tr\u1ecb v\xe0 kh\xf4ng c\xf2n gi\xe1 tr\u1ecb n\xe0o n\u1eefa. Stream k\u1ebft th\xfac."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Subscription: \u0110\u1ea1i di\u1ec7n cho vi\u1ec7c th\u1ef1c thi m\u1ed9t Observable. N\xf3 \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 khi b\u1ea1n g\u1ecdi .subscribe(). Quan tr\u1ecdng nh\u1ea5t, n\xf3 c\xf3 ph\u01b0\u01a1ng th\u1ee9c .unsubscribe() \u0111\u1ec3 h\u1ee7y b\u1ecf vi\u1ec7c l\u1eafng nghe v\xe0 gi\u1ea3i ph\xf3ng t\xe0i nguy\xean, tr\xe1nh r\xf2 r\u1ec9 b\u1ed9 nh\u1edb.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Operators: L\xe0 c\xe1c h\xe0m thu\u1ea7n t\xfay (pure functions) cho ph\xe9p b\u1ea1n thao t\xe1c v\u1edbi c\xe1c stream d\u1eef li\u1ec7u m\u1ed9t c\xe1ch khai b\xe1o (declarative). RxJS cung c\u1ea5p m\u1ed9t b\u1ed9 s\u01b0u t\u1eadp l\u1edbn c\xe1c operators:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Creation Operators: T\u1ea1o Observable t\u1eeb c\xe1c ngu\u1ed3n kh\xe1c nhau (of, from, interval, timer, fromEvent).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Transformation Operators: Bi\u1ebfn \u0111\u1ed5i gi\xe1 tr\u1ecb trong stream (map, pluck, scan, mergeMap/flatMap, switchMap, concatMap).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Filtering Operators: L\u1ecdc c\xe1c gi\xe1 tr\u1ecb kh\xf4ng mong mu\u1ed1n (filter, take, skip, debounceTime, distinctUntilChanged).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Combination Operators: K\u1ebft h\u1ee3p nhi\u1ec1u Observable l\u1ea1i v\u1edbi nhau (combineLatest, merge, zip, forkJoin).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Error Handling Operators: X\u1eed l\xfd l\u1ed7i trong stream (catchError, retry).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Utility Operators: C\xe1c to\xe1n t\u1eed ti\u1ec7n \xedch kh\xe1c (tap - \u0111\u1ec3 th\u1ef1c hi\u1ec7n side effect, delay).")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Subject: M\u1ed9t lo\u1ea1i \u0111\u1eb7c bi\u1ec7t ho\u1ea1t \u0111\u1ed9ng nh\u01b0 c\u1ea3 Observable v\xe0 Observer. N\xf3 c\xf3 th\u1ec3 ph\xe1t (multicast) gi\xe1 tr\u1ecb cho nhi\u1ec1u Observers c\xf9ng l\xfac. H\u1eefu \xedch trong vi\u1ec7c chia s\u1ebb tr\u1ea1ng th\xe1i ho\u1eb7c s\u1ef1 ki\u1ec7n. C\xe1c lo\u1ea1i ph\u1ed5 bi\u1ebfn:")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Subject: C\u01a1 b\u1ea3n nh\u1ea5t, kh\xf4ng c\xf3 gi\xe1 tr\u1ecb ban \u0111\u1ea7u."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"BehaviorSubject: Y\xeau c\u1ea7u gi\xe1 tr\u1ecb ban \u0111\u1ea7u v\xe0 ph\xe1t gi\xe1 tr\u1ecb cu\u1ed1i c\xf9ng cho subscriber m\u1edbi.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"ReplaySubject: Ghi l\u1ea1i v\xe0 ph\xe1t l\u1ea1i m\u1ed9t s\u1ed1 l\u01b0\u1ee3ng gi\xe1 tr\u1ecb tr\u01b0\u1edbc \u0111\xf3 cho subscriber m\u1edbi.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"AsyncSubject: Ch\u1ec9 ph\xe1t gi\xe1 tr\u1ecb cu\u1ed1i c\xf9ng khi stream complete.")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Scheduler: Ki\u1ec3m so\xe1t th\u1eddi \u0111i\u1ec3m v\xe0 c\xe1ch th\u1ee9c c\xe1c subscription b\u1eaft \u0111\u1ea7u v\xe0 c\xe1c th\xf4ng b\xe1o \u0111\u01b0\u1ee3c g\u1eedi \u0111i. H\u1eefu \xedch cho vi\u1ec7c \u0111i\u1ec1u ph\u1ed1i concurrency (v\xed d\u1ee5: asyncScheduler, queueScheduler)."))),(0,i.kt)("h3",{id:"t\u1ea1i-sao-d\xf9ng-rxjs-trong-nodejs"},"T\u1ea1i Sao D\xf9ng RxJS trong Node.js?"),(0,i.kt)("p",null,"M\u1eb7c d\xf9 Node.js \u0111\xe3 c\xf3 c\u01a1 ch\u1ebf non-blocking I/O hi\u1ec7u qu\u1ea3, RxJS v\u1eabn mang l\u1ea1i l\u1ee3i \xedch trong c\xe1c k\u1ecbch b\u1ea3n ph\u1ee9c t\u1ea1p:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Qu\u1ea3n l\xfd lu\u1ed3ng s\u1ef1 ki\u1ec7n ph\u1ee9c t\u1ea1p: X\u1eed l\xfd c\xe1c lu\u1ed3ng s\u1ef1 ki\u1ec7n li\xean t\u1ee5c nh\u01b0 WebSockets, d\u1eef li\u1ec7u c\u1ea3m bi\u1ebfn IoT, ho\u1eb7c t\u01b0\u01a1ng t\xe1c ng\u01b0\u1eddi d\xf9ng ph\u1ee9c t\u1ea1p.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"K\u1ebft h\u1ee3p v\xe0 \u0111i\u1ec1u ph\u1ed1i nhi\u1ec1u t\xe1c v\u1ee5 b\u1ea5t \u0111\u1ed3ng b\u1ed9: Khi b\u1ea1n c\u1ea7n k\u1ebft h\u1ee3p k\u1ebft qu\u1ea3 t\u1eeb nhi\u1ec1u API calls, database queries, ho\u1eb7c c\xe1c s\u1ef1 ki\u1ec7n h\u1ec7 th\u1ed1ng theo nh\u1eefng c\xe1ch ph\u1ee9c t\u1ea1p (v\xed d\u1ee5: ch\u1edd t\u1ea5t c\u1ea3 ho\xe0n th\xe0nh, l\u1ea5y c\xe1i \u0111\u1ea7u ti\xean, x\u1eed l\xfd song song c\xf3 gi\u1edbi h\u1ea1n).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Rate Limiting, Debouncing, Throttling: D\u1ec5 d\xe0ng ki\u1ec3m so\xe1t t\u1ea7n su\u1ea5t c\xe1c h\xe0nh \u0111\u1ed9ng \u0111\u01b0\u1ee3c th\u1ef1c thi (v\xed d\u1ee5: gi\u1edbi h\u1ea1n s\u1ed1 l\u1ea7n g\u1ecdi API, tr\xec ho\xe3n x\u1eed l\xfd input ng\u01b0\u1eddi d\xf9ng).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Qu\u1ea3n l\xfd State ph\u1ee9c t\u1ea1p: S\u1eed d\u1ee5ng BehaviorSubject ho\u1eb7c ReplaySubject \u0111\u1ec3 qu\u1ea3n l\xfd v\xe0 chia s\u1ebb tr\u1ea1ng th\xe1i trong \u1ee9ng d\u1ee5ng.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Code d\u1ec5 \u0111\u1ecdc h\u01a1n cho logic b\u1ea5t \u0111\u1ed3ng b\u1ed9 ph\u1ee9c t\u1ea1p: S\u1eed d\u1ee5ng c\xe1c operators gi\xfap di\u1ec5n \u0111\u1ea1t c\xe1c lu\u1ed3ng x\u1eed l\xfd ph\u1ee9c t\u1ea1p m\u1ed9t c\xe1ch r\xf5 r\xe0ng v\xe0 khai b\xe1o h\u01a1n so v\u1edbi vi\u1ec7c l\u1ed3ng nhi\u1ec1u callback ho\u1eb7c promise chain."))),(0,i.kt)("h3",{id:"so-s\xe1nh-v\u1edbi-promisesasyncawait"},"So S\xe1nh v\u1edbi Promises/Async/Await"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Promises/Async/Await"),": Tuy\u1ec7t v\u1eddi cho c\xe1c t\xe1c v\u1ee5 b\u1ea5t \u0111\u1ed3ng b\u1ed9 tr\u1ea3 v\u1ec1 m\u1ed9t gi\xe1 tr\u1ecb duy nh\u1ea5t (v\xed d\u1ee5: g\u1ecdi API, \u0111\u1ecdc file). C\xfa ph\xe1p async/await l\xe0m cho code tr\xf4ng gi\u1ed1ng \u0111\u1ed3ng b\u1ed9, r\u1ea5t d\u1ec5 \u0111\u1ecdc cho c\xe1c lu\u1ed3ng tu\u1ea7n t\u1ef1."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"RxJS"),": M\u1ea1nh m\u1ebd h\u01a1n khi x\u1eed l\xfd c\xe1c lu\u1ed3ng (streams) c\xf3 th\u1ec3 ph\xe1t ra nhi\u1ec1u gi\xe1 tr\u1ecb theo th\u1eddi gian, c\u1ea7n h\u1ee7y b\u1ecf (cancellation), ho\u1eb7c y\xeau c\u1ea7u c\xe1c ph\xe9p bi\u1ebfn \u0111\u1ed5i/k\u1ebft h\u1ee3p lu\u1ed3ng ph\u1ee9c t\u1ea1p. \u0110\u01b0\u1eddng cong h\u1ecdc t\u1eadp (learning curve) c\u1ee7a RxJS cao h\u01a1n."),(0,i.kt)("h2",{id:"chuy\xean-s\xe2u-v\u1ec1-scope-trong-javascript-v\xe0-typescript"},"Chuy\xean S\xe2u v\u1ec1 Scope trong JavaScript (v\xe0 TypeScript)"),(0,i.kt)("h4",{id:"global-scope"},"Global Scope"),(0,i.kt)("p",null,"Bi\u1ebfn \u0111\u01b0\u1ee3c khai b\xe1o b\xean ngo\xe0i b\u1ea5t k\u1ef3 h\xe0m hay block n\xe0o s\u1ebd thu\u1ed9c Global Scope. Trong m\xf4i tr\u01b0\u1eddng Node.js, bi\u1ebfn global th\u1ef1c s\u1ef1 \u0111\u01b0\u1ee3c g\u1eafn v\xe0o \u0111\u1ed1i t\u01b0\u1ee3ng global. Trong tr\xecnh duy\u1ec7t l\xe0 window. N\xean h\u1ea1n ch\u1ebf t\u1ed1i \u0111a vi\u1ec7c s\u1eed d\u1ee5ng bi\u1ebfn global."),(0,i.kt)("h4",{id:"function-scope"},"Function Scope"),(0,i.kt)("p",null,"Bi\u1ebfn \u0111\u01b0\u1ee3c khai b\xe1o b\u1eb1ng var b\xean trong m\u1ed9t h\xe0m ch\u1ec9 c\xf3 th\u1ec3 truy c\u1eadp \u0111\u01b0\u1ee3c b\xean trong h\xe0m \u0111\xf3 (v\xe0 c\xe1c h\xe0m l\u1ed3ng b\xean trong)."),(0,i.kt)("h4",{id:"block-scope"},"Block Scope"),(0,i.kt)("p",null,"Bi\u1ebfn \u0111\u01b0\u1ee3c khai b\xe1o b\u1eb1ng let v\xe0 const b\xean trong m\u1ed9t block ({ ... } - v\xed d\u1ee5: trong if, for, ho\u1eb7c block \u0111\u01a1n l\u1ebb) ch\u1ec9 c\xf3 th\u1ec3 truy c\u1eadp \u0111\u01b0\u1ee3c b\xean trong block \u0111\xf3. \u0110\xe2y l\xe0 scope \u0111\u01b0\u1ee3c \u01b0a chu\u1ed9ng h\u01a1n Function Scope v\xec n\xf3 gi\xfap gi\u1edbi h\u1ea1n ph\u1ea1m vi c\u1ee7a bi\u1ebfn ch\u1eb7t ch\u1ebd h\u01a1n."),(0,i.kt)("h4",{id:"lexical-scope-static-scope"},"Lexical Scope (Static Scope)"),(0,i.kt)("p",null,"JavaScript s\u1eed d\u1ee5ng Lexical Scope, ngh\u0129a l\xe0 scope c\u1ee7a m\u1ed9t h\xe0m \u0111\u01b0\u1ee3c x\xe1c \u0111\u1ecbnh t\u1ea1i th\u1eddi \u0111i\u1ec3m h\xe0m \u0111\xf3 \u0111\u01b0\u1ee3c \u0111\u1ecbnh ngh\u0129a, ch\u1ee9 kh\xf4ng ph\u1ea3i t\u1ea1i th\u1eddi \u0111i\u1ec3m n\xf3 \u0111\u01b0\u1ee3c g\u1ecdi. M\u1ed9t h\xe0m l\u1ed3ng b\xean trong (inner function) c\xf3 th\u1ec3 truy c\u1eadp c\xe1c bi\u1ebfn c\u1ee7a h\xe0m cha (outer function) ngay c\u1ea3 khi h\xe0m cha \u0111\xe3 th\u1ef1c thi xong. \u0110\xe2y ch\xednh l\xe0 c\u01a1 ch\u1ebf t\u1ea1o ra Closures."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Closure"),': L\xe0 s\u1ef1 k\u1ebft h\u1ee3p c\u1ee7a m\u1ed9t h\xe0m v\xe0 m\xf4i tr\u01b0\u1eddng lexical (lexical environment) n\u01a1i h\xe0m \u0111\xf3 \u0111\u01b0\u1ee3c khai b\xe1o. M\xf4i tr\u01b0\u1eddng n\xe0y bao g\u1ed3m t\u1ea5t c\u1ea3 c\xe1c bi\u1ebfn c\u1ee5c b\u1ed9 c\xf3 hi\u1ec7u l\u1ef1c t\u1ea1i th\u1eddi \u0111i\u1ec3m h\xe0m \u0111\u01b0\u1ee3c t\u1ea1o ra. Closure cho ph\xe9p h\xe0m "nh\u1edb" m\xf4i tr\u01b0\u1eddng m\xe0 n\xf3 \u0111\u01b0\u1ee3c t\u1ea1o ra.'),(0,i.kt)("h4",{id:"scope-chain"},"Scope Chain"),(0,i.kt)("p",null,"Khi truy c\u1eadp m\u1ed9t bi\u1ebfn, JavaScript engine s\u1ebd t\xecm ki\u1ebfm bi\u1ebfn \u0111\xf3 theo chu\u1ed7i scope (Scope Chain):"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"B\u1eaft \u0111\u1ea7u t\u1eeb scope hi\u1ec7n t\u1ea1i (local scope).")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"N\u1ebfu kh\xf4ng t\xecm th\u1ea5y, t\xecm l\xean scope c\u1ee7a h\xe0m cha (outer scope).")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Ti\u1ebfp t\u1ee5c t\xecm l\xean c\xe1c scope cha ti\u1ebfp theo.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Cu\u1ed1i c\xf9ng, t\xecm trong Global Scope.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"N\u1ebfu kh\xf4ng t\xecm th\u1ea5y \u1edf \u0111\xe2u c\u1ea3, s\u1ebd b\xe1o l\u1ed7i ReferenceError."))))}g.isMDXComponent=!0}}]);