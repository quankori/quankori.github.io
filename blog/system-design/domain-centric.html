<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-blog/system-design/domain-centric">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Domain-Centric Architectures | Quan Nguyen</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://quankori.github.io/blog/system-design/domain-centric"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Domain-Centric Architectures | Quan Nguyen"><meta data-rh="true" name="description" content="Các kiến trúc phần mềm hiện đại như Onion, Clean, EBI, và Hexagonal (Ports and Adapters) ngày càng trở nên phổ biến nhờ khả năng giải quyết các vấn đề cố hữu trong các kiến trúc phân lớp truyền thống. Chúng tập trung vào việc đặt miền nghiệp vụ (domain) làm trung tâm (domain-centric) và quản lý sự phụ thuộc một cách chặt chẽ thông qua nguyên tắc Đảo ngược Phụ thuộc (Dependency Inversion). Điều này giúp xây dựng các ứng dụng linh hoạt, dễ bảo trì, dễ kiểm thử và ít bị ảnh hưởng bởi những thay đổi trong các thành phần cơ sở hạ tầng (như UI, database)."><meta data-rh="true" property="og:description" content="Các kiến trúc phần mềm hiện đại như Onion, Clean, EBI, và Hexagonal (Ports and Adapters) ngày càng trở nên phổ biến nhờ khả năng giải quyết các vấn đề cố hữu trong các kiến trúc phân lớp truyền thống. Chúng tập trung vào việc đặt miền nghiệp vụ (domain) làm trung tâm (domain-centric) và quản lý sự phụ thuộc một cách chặt chẽ thông qua nguyên tắc Đảo ngược Phụ thuộc (Dependency Inversion). Điều này giúp xây dựng các ứng dụng linh hoạt, dễ bảo trì, dễ kiểm thử và ít bị ảnh hưởng bởi những thay đổi trong các thành phần cơ sở hạ tầng (như UI, database)."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://quankori.github.io/blog/system-design/domain-centric"><link data-rh="true" rel="alternate" href="https://quankori.github.io/blog/system-design/domain-centric" hreflang="en"><link data-rh="true" rel="alternate" href="https://quankori.github.io/blog/system-design/domain-centric" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://a-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Quan Nguyen" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.d2c8af8d.css">
<link rel="preload" href="/assets/js/runtime~main.9e9ccc88.js" as="script">
<link rel="preload" href="/assets/js/main.8db436b3.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/icon.png" alt="Kori Blog" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/icon.png" alt="Kori Blog" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Kori Blog</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">My Note</a></div><div class="navbar__items navbar__items--right"><div class="navbar-search searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a href="https://www.linkedin.com/in/quankori/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">My Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/quankori/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-icon" title="My Github" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">About Me</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/blog/system-design/checklist">System Design</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/system-design/checklist">Checklist</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/system-design/monolithic">Monolithic Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/blog/system-design/domain-centric">Domain Centric Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/system-design/event-driven">Event Driven Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/system-design/microservices">Microservices Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/system-design/serverless">Serverless Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/system-design/system-design-pattern">System Design Pattern</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/system-design/database">Database</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/blog/programming/nodejs">Programming Language</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/blog/english/cheatsheet">English</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">System Design</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Domain Centric Architecture</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Domain-Centric Architectures</h1></header><p>Các kiến trúc phần mềm hiện đại như Onion, Clean, EBI, và Hexagonal (Ports and Adapters) ngày càng trở nên phổ biến nhờ khả năng giải quyết các vấn đề cố hữu trong các kiến trúc phân lớp truyền thống. Chúng tập trung vào việc đặt miền nghiệp vụ (domain) làm trung tâm (domain-centric) và quản lý sự phụ thuộc một cách chặt chẽ thông qua nguyên tắc Đảo ngược Phụ thuộc (Dependency Inversion). Điều này giúp xây dựng các ứng dụng linh hoạt, dễ bảo trì, dễ kiểm thử và ít bị ảnh hưởng bởi những thay đổi trong các thành phần cơ sở hạ tầng (như UI, database).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="onion-architecture">Onion Architecture<a href="#onion-architecture" class="hash-link" aria-label="Direct link to Onion Architecture" title="Direct link to Onion Architecture">​</a></h2><p>Được giới thiệu bởi Jeffrey Palermo, Onion Architecture giải quyết vấn đề phụ thuộc của Layered Architecture bằng cách đặt Domain Model và Domain Services (lõi nghiệp vụ) vào trung tâm. Các lớp bên ngoài phụ thuộc vào các lớp bên trong, nhưng không ngược lại. Quy tắc phụ thuộc (Dependency Rule) là mấu chốt: mọi phụ thuộc chỉ hướng vào trong.</p><p>Các lớp chính (từ trong ra ngoài):</p><p>Domain Model: Các thực thể (entities) cốt lõi của miền nghiệp vụ. Không phụ thuộc vào bất cứ thứ gì khác.</p><p>Domain Services: Logic nghiệp vụ liên quan đến nhiều entities hoặc các quy tắc phức tạp. Chỉ phụ thuộc vào Domain Model.</p><p>Application Services: Điều phối các trường hợp sử dụng (use cases) của ứng dụng. Phụ thuộc vào Domain Services và các interface được định nghĩa ở lớp này (nhưng triển khai ở lớp ngoài).</p><p>Infrastructure / Outer Layers: Các chi tiết kỹ thuật như UI, Database, Frameworks, API bên ngoài. Lớp này phụ thuộc vào Application Services (thông qua interfaces) và triển khai các interface đó (ví dụ: UserRepository triển khai IUserRepository).</p><p>Nguyên tắc Đảo ngược Phụ thuộc (Dependency Inversion Principle) được áp dụng triệt để: các lớp bên trong định nghĩa interfaces, và các lớp bên ngoài cung cấp implementations. Điều này giúp tách biệt hoàn toàn lõi nghiệp vụ khỏi các chi tiết kỹ thuật.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">my-onion-app/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── src/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── domain/                 # Innermost core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── models/             # Entities</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   └── user.model.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── services/           # Domain services (optional)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       └── user.logic.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── application/            # Application layer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── services/           # Application services / Use cases</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   └── user.service.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── interfaces/         # Interfaces for outer layers to implement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       └── user.repository.interface.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── infrastructure/         # Outermost layer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── persistence/        # Data access implementation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   └── user.repository.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── web/                # Controllers, API endpoints</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   └── user.controller.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── external/           # Clients for external APIs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── core/                   # Shared utilities (few dependencies)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── main.ts                 # Entry point, dependency injection setup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── node_modules/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── tsconfig.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="clean-architecture">Clean Architecture<a href="#clean-architecture" class="hash-link" aria-label="Direct link to Clean Architecture" title="Direct link to Clean Architecture">​</a></h2><p>Clean Architecture, được đề xuất bởi Robert C. Martin (Uncle Bob), rất tương đồng với Onion và Hexagonal Architecture. Nó cũng nhấn mạnh việc tách biệt các mối quan tâm thành các vòng tròn đồng tâm và tuân thủ nghiêm ngặt Quy tắc Phụ thuộc (Dependency Rule): phụ thuộc chỉ hướng vào trong.</p><p>Các vòng tròn chính (từ trong ra ngoài):</p><p>Entities: Các đối tượng nghiệp vụ cốt lõi của ứng dụng, chứa các quy tắc nghiệp vụ quan trọng nhất và ít thay đổi nhất.</p><p>Use Cases (Interactors): Logic nghiệp vụ cụ thể của ứng dụng, điều phối luồng dữ liệu đến và đi từ Entities. Chúng định nghĩa các interfaces cho lớp ngoài (Presenters, Gateways).</p><p>Interface Adapters: Chuyển đổi dữ liệu giữa định dạng phù hợp cho Use Cases/Entities và định dạng phù hợp cho các thành phần bên ngoài (Database, Web, UI). Bao gồm Controllers, Presenters, Gateways (Repositories).</p><p>Frameworks &amp; Drivers: Lớp ngoài cùng chứa các chi tiết cụ thể như Frameworks (web framework), Database, UI, thiết bị.</p><p>Giống như Onion, Clean Architecture sử dụng Dependency Inversion để đảm bảo lõi nghiệp vụ (Entities, Use Cases) không phụ thuộc vào các chi tiết bên ngoài.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">my-clean-app/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── src/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── domain/                 # Entities + Use Case Interfaces (sometimes separate)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── entities/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   └── product.entity.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── usecases/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       ├── interfaces/     # Input/Output ports, Gateway interfaces</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       │   └── product.repository.interface.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       │   └── product.presenter.interface.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       └── get_product.usecase.ts # Interactor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── application/            # Use Case implementations (sometimes merged into domain)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── infrastructure/         # Outermost layer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── adapters/           # Interface Adapters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── controllers/    # Web controllers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   │   └── product.controller.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── presenters/     # Data formatters for UI/API</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   │   └── product.api.presenter.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   └── gateways/       # Repository implementations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │       └── product.mongo.repository.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── frameworks/         # Web framework, DB driver setup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       └── express.setup.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── main.ts                 # Entry point, DI container setup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── node_modules/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── tsconfig.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ebi-architecture-entity-boundary-interactor">EBI Architecture (Entity-Boundary-Interactor)<a href="#ebi-architecture-entity-boundary-interactor" class="hash-link" aria-label="Direct link to EBI Architecture (Entity-Boundary-Interactor)" title="Direct link to EBI Architecture (Entity-Boundary-Interactor)">​</a></h2><p>EBI là một biến thể hoặc cách nhìn khác của Clean Architecture, tập trung vào việc mô hình hóa các Use Cases. Nó chia các thành phần xử lý một yêu cầu thành ba loại:</p><p>Interactor (Use Case): Đối tượng điều phối chính cho một use case cụ thể. Nó chứa logic ứng dụng, gọi đến Entities và Boundaries. Tương đương với Use Case/Interactor trong Clean Architecture.</p><p>Entity: Các đối tượng nghiệp vụ cốt lõi. Tương đương với Entities trong Clean Architecture.</p><p>Boundary: Interfaces định nghĩa cách Interactor giao tiếp với thế giới bên ngoài (cả input và output).</p><p>Input Boundary: Interface mà lớp ngoài (ví dụ: Controller) gọi để kích hoạt Interactor.</p><p>Output Boundary: Interface mà Interactor gọi để gửi kết quả ra lớp ngoài (ví dụ: Presenter).</p><p>Gateway/Repository Boundary: Interface mà Interactor dùng để tương tác với dữ liệu (do lớp ngoài triển khai).</p><p>Quy tắc phụ thuộc vẫn là hướng vào trong: Interactor phụ thuộc vào Entity và Boundary interfaces, nhưng không phụ thuộc vào các lớp triển khai Boundary ở bên ngoài.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">my-ebi-app/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── src/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── usecases/               # Group by use case</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── register_user/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       ├── register_user.interactor.ts # Interactor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       ├── register_user.request.model.ts # Input data structure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       ├── register_user.response.model.ts # Output data structure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       ├── user.entity.ts              # Entity (can be shared)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       ├── user.repository.boundary.ts # Gateway Boundary Interface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       └── user.presenter.boundary.ts  # Output Boundary Interface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── domain_entities/        # Or separate Entities if shared across many use cases</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── user.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── infrastructure/         # Boundary Implementations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── controllers/        # Calls Input Boundary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   └── user.api.controller.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── presenters/         # Implements Output Boundary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   └── user.json.presenter.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── persistence/        # Implements Gateway Boundary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       └── user.db.repository.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── main.ts                 # Entry point, DI setup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── node_modules/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── tsconfig.js</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hexagonal-architecture">Hexagonal Architecture<a href="#hexagonal-architecture" class="hash-link" aria-label="Direct link to Hexagonal Architecture" title="Direct link to Hexagonal Architecture">​</a></h2><p>Được đặt tên bởi Alistair Cockburn, Hexagonal Architecture (còn gọi là Ports and Adapters) cũng nhằm mục đích tách biệt lõi ứng dụng (logic nghiệp vụ) khỏi các yếu tố bên ngoài (UI, DB, API khác...).</p><p>Application Core (Hexagon): Chứa Entities và Use Cases (logic nghiệp vụ thuần túy), không biết gì về thế giới bên ngoài.</p><p>Ports: Là các cổng giao tiếp của lõi ứng dụng, được định nghĩa dưới dạng interfaces. Có hai loại port:</p><p>Driving Ports (Input Ports): API của lõi ứng dụng, định nghĩa cách thế giới bên ngoài có thể lái (gọi) ứng dụng (ví dụ: UserServicePort với phương thức createUser). Thường được triển khai bởi Use Cases/Application Services.</p><p>Driven Ports (Output Ports): Interfaces định nghĩa những gì lõi ứng dụng cần từ bên ngoài (ví dụ: UserRepositoryPort để lưu/tải dữ liệu, NotificationServicePort để gửi email). Lõi ứng dụng gọi các port này.</p><p>Adapters: Là cầu nối giữa thế giới bên ngoài và các Port.</p><p>Driving Adapters: Chuyển đổi input từ bên ngoài (HTTP request, CLI command) thành lời gọi đến Driving Port (ví dụ: UserController gọi UserServicePort).</p><p>Driven Adapters: Triển khai các Driven Port interfaces, tương tác với các công cụ cụ thể (ví dụ: DatabaseUserRepository triển khai UserRepositoryPort, SmtpNotificationService triển khai NotificationServicePort).</p><p>Quy tắc phụ thuộc: Mọi phụ thuộc đều hướng từ Adapters vào Ports (và vào Application Core). Lõi ứng dụng không phụ thuộc vào Adapters.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">my-hexagonal-app/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── src/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── application/            # Application core (Hexagon)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── domain/             # Entities</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   └── order.model.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── ports/              # Port definitions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── input/          # Driving Ports</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   │   └── place_order.usecase.port.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   └── output/         # Driven Ports</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │       └── order.repository.port.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │       └── payment.gateway.port.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── services/           # Use Cases / Application Services (implement Input Ports)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       └── order.service.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── infrastructure/         # Adapters and external details</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── adapters/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── input/          # Driving Adapters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   │   └── web/        # REST Controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   │   │   └── order.controller.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   │   └── cli/        # Command Line Interface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   │       └── order.command.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   └── output/         # Driven Adapters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │       ├── persistence/ # Database implementation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │       │   └── order.dynamodb.repository.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │       └── payment/     # Payment gateway implementation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │           └── stripe.adapter.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── config/             # DI, framework setup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── main.ts                 # Entry point</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── node_modules/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── tsconfig.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/system-design/monolithic"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Monolithic Architecture</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/system-design/event-driven"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Event-Driven Architecture</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#onion-architecture" class="table-of-contents__link toc-highlight">Onion Architecture</a></li><li><a href="#clean-architecture" class="table-of-contents__link toc-highlight">Clean Architecture</a></li><li><a href="#ebi-architecture-entity-boundary-interactor" class="table-of-contents__link toc-highlight">EBI Architecture (Entity-Boundary-Interactor)</a></li><li><a href="#hexagonal-architecture" class="table-of-contents__link toc-highlight">Hexagonal Architecture</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a class="footerLogoLink_BH7S" href="/"><img src="/img/icon.png" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="40" height="40"><img src="/img/icon.png" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="40" height="40"></a></div><div class="footer__copyright">Copyright © 2025 Quan Kori</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9e9ccc88.js"></script>
<script src="/assets/js/main.8db436b3.js"></script>
</body>
</html>