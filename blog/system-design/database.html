<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-blog/system-design/database">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Database | Quan Nguyen</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://quankori.github.io/blog/system-design/database"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Database | Quan Nguyen"><meta data-rh="true" name="description" content="Core concepts (Các khái niệm Cốt lõi)"><meta data-rh="true" property="og:description" content="Core concepts (Các khái niệm Cốt lõi)"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://quankori.github.io/blog/system-design/database"><link data-rh="true" rel="alternate" href="https://quankori.github.io/blog/system-design/database" hreflang="en"><link data-rh="true" rel="alternate" href="https://quankori.github.io/blog/system-design/database" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://a-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Quan Nguyen" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.d2c8af8d.css">
<link rel="preload" href="/assets/js/runtime~main.9e9ccc88.js" as="script">
<link rel="preload" href="/assets/js/main.8db436b3.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/icon.png" alt="Kori Blog" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/icon.png" alt="Kori Blog" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Kori Blog</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">My Note</a></div><div class="navbar__items navbar__items--right"><div class="navbar-search searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a href="https://www.linkedin.com/in/quankori/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">My Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/quankori/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-icon" title="My Github" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">About Me</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/blog/system-design/checklist">System Design</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/system-design/checklist">Checklist</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/system-design/monolithic">Monolithic Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/system-design/domain-centric">Domain Centric Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/system-design/event-driven">Event Driven Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/system-design/microservices">Microservices Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/system-design/serverless">Serverless Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/system-design/system-design-pattern">System Design Pattern</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/blog/system-design/database">Database</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/blog/programming/nodejs">Programming Language</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/blog/english/cheatsheet">English</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">System Design</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Database</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Database</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="core-concepts-các-khái-niệm-cốt-lõi">Core concepts (Các khái niệm Cốt lõi)<a href="#core-concepts-các-khái-niệm-cốt-lõi" class="hash-link" aria-label="Direct link to Core concepts (Các khái niệm Cốt lõi)" title="Direct link to Core concepts (Các khái niệm Cốt lõi)">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="consistency-và-eventual-consistency">Consistency và Eventual Consistency<a href="#consistency-và-eventual-consistency" class="hash-link" aria-label="Direct link to Consistency và Eventual Consistency" title="Direct link to Consistency và Eventual Consistency">​</a></h3><p>Đây là một trong những điểm khác biệt cơ bản nhất giữa các hệ thống cơ sở dữ liệu truyền thống (như RDBMS) và nhiều hệ thống NoSQL phân tán.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="strong-consistency-tính-nhất-quán-mạnh-mẽ">Strong Consistency (Tính nhất quán Mạnh mẽ):<a href="#strong-consistency-tính-nhất-quán-mạnh-mẽ" class="hash-link" aria-label="Direct link to Strong Consistency (Tính nhất quán Mạnh mẽ):" title="Direct link to Strong Consistency (Tính nhất quán Mạnh mẽ):">​</a></h4><p>Khái niệm: Đảm bảo rằng mọi thao tác đọc (read) sau khi một thao tác ghi (write) hoàn thành sẽ trả về giá trị đã được ghi đó. Trong một hệ thống phân tán, điều này có nghĩa là tất cả các bản sao (replicas) phải đồng bộ ngay lập tức trước khi thao tác ghi được coi là thành công và dữ liệu mới được phép đọc.</p><p>Ví dụ (PostgreSQL): Giả sử bạn thực hiện một giao dịch chuyển tiền từ tài khoản A sang tài khoản B trong PostgreSQL.</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">BEGIN</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">UPDATE</span><span class="token plain"> accounts </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> balance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> balance </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> account_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;A&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">UPDATE</span><span class="token plain"> accounts </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> balance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> balance </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> account_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;B&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">COMMIT</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Ngay sau khi COMMIT thành công:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> balance </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> accounts </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> account_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;A&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- Sẽ luôn thấy số dư đã trừ 100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> balance </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> accounts </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> account_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;B&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- Sẽ luôn thấy số dư đã cộng 100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Bất kỳ ai truy vấn số dư của A hoặc B ngay sau khi giao dịch commit thành công đều sẽ thấy trạng thái mới nhất. Nếu có read replicas, PostgreSQL đảm bảo (thông qua cơ chế replication) rằng dữ liệu đọc từ replica (với cấu hình phù hợp) cũng phản ánh trạng thái nhất quán này (có thể có độ trễ nhỏ, nhưng một khi dữ liệu đến replica, nó là nhất quán tại thời điểm đó).</p><p>Ưu điểm: Đơn giản hóa logic ứng dụng vì lập trình viên luôn có thể tin tưởng vào dữ liệu đọc được là mới nhất. Quan trọng cho các hệ thống yêu cầu độ chính xác cao (tài chính, ngân hàng).</p><p>Nhược điểm: Có thể làm giảm tính sẵn sàng (Availability) và tăng độ trễ (latency) trong các hệ thống phân tán, vì hệ thống phải chờ tất cả các node liên quan đồng bộ trước khi xác nhận thao tác ghi.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="eventual-consistency-tính-nhất-quán-cuối-cùng">Eventual Consistency (Tính nhất quán Cuối cùng):<a href="#eventual-consistency-tính-nhất-quán-cuối-cùng" class="hash-link" aria-label="Direct link to Eventual Consistency (Tính nhất quán Cuối cùng):" title="Direct link to Eventual Consistency (Tính nhất quán Cuối cùng):">​</a></h4><p>Khái niệm: Đảm bảo rằng, nếu không có thêm cập nhật nào cho một mục dữ liệu cụ thể, thì cuối cùng tất cả các lượt truy cập (đọc) đến mục dữ liệu đó sẽ trả về giá trị được ghi cuối cùng. Tuy nhiên, trong một khoảng thời gian ngắn sau khi ghi, các lượt đọc khác nhau có thể trả về giá trị cũ hoặc giá trị mới.</p><p>Ví dụ (MongoDB - Replica Set với Read Preference secondary): Một MongoDB replica set bao gồm một node Primary (nhận ghi) và nhiều node Secondary (sao chép dữ liệu từ Primary).</p><ol><li><p>Client thực hiện thao tác ghi vào node Primary: <code>db.users.updateOne({\_id: 1}, {$set: {email: &quot;new@example.com&quot;}})</code> (với Write Concern mặc định là w:1 - chỉ cần Primary xác nhận).</p></li><li><p>Primary xác nhận ghi thành công cho client ngay lập tức.</p></li><li><p>Dữ liệu được sao chép bất đồng bộ (asynchronously) đến các node Secondary.</p></li><li><p>Ngay sau bước 2, trước khi bước 3 hoàn thành trên một Secondary cụ thể: Nếu một client khác đọc từ Secondary đó (sử dụng Read Preference secondary), họ có thể vẫn thấy địa chỉ email cũ.</p></li><li><p>Sau một khoảng thời gian (thường rất ngắn): Dữ liệu được sao chép xong, và mọi lượt đọc từ Secondary đó sẽ thấy địa chỉ email mới (<a href="mailto:new@example.com" target="_blank" rel="noopener noreferrer">new@example.com</a>).</p></li></ol><ul><li><p>Ưu điểm: Tăng tính sẵn sàng (Availability) và giảm độ trễ ghi, vì hệ thống không cần chờ tất cả các replica đồng bộ ngay lập tức. Thích hợp cho các hệ thống ưu tiên tốc độ và khả năng chịu lỗi phân vùng (ví dụ: mạng xã hội, catalog sản phẩm).</p></li><li><p>Nhược điểm: Phức tạp hóa logic ứng dụng vì phải xử lý khả năng đọc dữ liệu cũ (stale data). Không phù hợp cho các nghiệp vụ yêu cầu tính nhất quán tức thì.</p></li></ul><p>Cách khắc phục/giảm thiểu nhược điểm:</p><ul><li><p>Read Your Writes: Đảm bảo rằng một client luôn đọc được dữ liệu mà chính nó vừa ghi (ví dụ: đọc từ Primary sau khi ghi).</p></li><li><p>Monotonic Reads: Đảm bảo rằng nếu một client đọc thấy một trạng thái dữ liệu, các lần đọc tiếp theo của client đó sẽ không bao giờ thấy trạng thái cũ hơn.</p></li><li><p>Điều chỉnh Read/Write Concerns (MongoDB): Sử dụng các mức độ đảm bảo cao hơn. Ví dụ:</p><ul><li><p>Write Concern: {w: &quot;majority&quot;}: Yêu cầu ghi phải được xác nhận bởi đa số các node trong replica set trước khi trả về thành công cho client.</p></li><li><p>Read Concern: &quot;majority&quot;: Đảm bảo dữ liệu đọc ra đã được xác nhận bởi đa số node, tránh đọc dữ liệu có thể bị rollback.</p></li><li><p>Read Concern: &quot;linearizable&quot; (chỉ đọc từ Primary): Đảm bảo tính nhất quán mạnh nhất, nhưng ảnh hưởng hiệu năng.</p></li><li><p>Read Preference: &quot;primary&quot;: Luôn đọc từ node Primary để có dữ liệu mới nhất (nhưng tăng tải cho Primary).</p></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="scaling-khả-năng-mở-rộng">Scaling (Khả năng Mở rộng)<a href="#scaling-khả-năng-mở-rộng" class="hash-link" aria-label="Direct link to Scaling (Khả năng Mở rộng)" title="Direct link to Scaling (Khả năng Mở rộng)">​</a></h3><p>Cả PostgreSQL và MongoDB đều cung cấp các cơ chế để mở rộng, nhưng cách tiếp cận khác nhau.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="postgresql-scaling">PostgreSQL Scaling:<a href="#postgresql-scaling" class="hash-link" aria-label="Direct link to PostgreSQL Scaling:" title="Direct link to PostgreSQL Scaling:">​</a></h4><p>Vertical Scaling (Scale Up): Tăng CPU, RAM, Disk cho server PostgreSQL. Đơn giản nhưng có giới hạn vật lý và chi phí.</p><p>Read Replicas (Streaming Replication): Tạo các bản sao chỉ đọc của database chính. Các truy vấn đọc có thể được chuyển hướng đến replicas, giảm tải cho server chính. Đây là cách phổ biến nhất để scale read cho PostgreSQL. Dữ liệu được sao chép gần như real-time.</p><p>Logical Replication: Cho phép sao chép dữ liệu ở mức độ logic (theo từng bảng hoặc thay đổi) đến các server khác, có thể dùng cho nhiều mục đích hơn streaming replication (ví dụ: nâng cấp phiên bản, sao chép một phần dữ liệu).</p><p>Sharding (Phân mảnh): Chia dữ liệu của một bảng lớn thành nhiều phần nhỏ (shards) và lưu trữ trên nhiều server PostgreSQL độc lập. Đây là cách scale cả read và write, nhưng phức tạp hơn đáng kể so với replication.</p><p>Thách thức: Việc chia dữ liệu (sharding key), định tuyến truy vấn (query routing), quản lý transaction qua nhiều shard, join dữ liệu giữa các shard rất phức tạp.</p><p>Giải pháp: Có thể tự triển khai logic sharding ở tầng ứng dụng hoặc sử dụng các extension/giải pháp như:</p><ul><li><p>Citus Data: Extension mã nguồn mở (nay thuộc Microsoft) biến PostgreSQL thành một database phân tán, tự động hóa việc sharding và định tuyến truy vấn.</p></li><li><p>pg_partman: Extension giúp quản lý partitioning (phân vùng bảng - một dạng sharding cục bộ trên một server).</p></li><li><p>Các giải pháp middleware sharding khác.</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="mongodb-scaling">MongoDB Scaling:<a href="#mongodb-scaling" class="hash-link" aria-label="Direct link to MongoDB Scaling:" title="Direct link to MongoDB Scaling:">​</a></h4><p>Vertical Scaling (Scale Up): Tương tự PostgreSQL, tăng tài nguyên cho server MongoDB.</p><p>Replica Sets (High Availability &amp; Read Scaling): Đây là nền tảng của MongoDB. Một replica set gồm 1 Primary và nhiều Secondary.</p><ul><li><p>High Availability: Nếu Primary gặp sự cố, các Secondary sẽ bầu chọn ra một Primary mới một cách tự động (automatic failover), đảm bảo hệ thống vẫn hoạt động.</p></li><li><p>Read Scaling: Client có thể cấu hình để đọc từ các node Secondary (Read Preferences), phân tán tải đọc.</p></li></ul><p>Sharding (Horizontal Scaling): MongoDB được thiết kế với sharding là tính năng cốt lõi để scale cả read và write cho các tập dữ liệu cực lớn.</p><p>Kiến trúc: Một sharded cluster bao gồm:</p><ul><li><p>Shards: Mỗi shard là một replica set riêng, lưu trữ một phần dữ liệu.</p></li><li><p>Mongos (Query Routers): Các tiến trình định tuyến truy vấn từ client đến đúng shard(s). Client kết nối đến Mongos thay vì shard trực tiếp.</p></li><li><p>Config Servers: Lưu trữ metadata về cluster, bao gồm thông tin về shard nào chứa dữ liệu nào (mapping dựa trên shard key).</p></li></ul><p>Shard Key: Việc chọn shard key là cực kỳ quan trọng, ảnh hưởng đến việc phân phối dữ liệu đồng đều và hiệu năng truy vấn.</p><p>Ưu điểm: Khả năng mở rộng gần như tuyến tính cho cả read và write, được tích hợp sẵn và quản lý bởi MongoDB.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="performance-optimization-tối-ưu-hiệu-năng">Performance Optimization (Tối ưu Hiệu năng)<a href="#performance-optimization-tối-ưu-hiệu-năng" class="hash-link" aria-label="Direct link to Performance Optimization (Tối ưu Hiệu năng)" title="Direct link to Performance Optimization (Tối ưu Hiệu năng)">​</a></h3><p>Tối ưu hóa hiệu năng là quá trình liên tục cho cả SQL và NoSQL.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="postgresql-sql-optimization">PostgreSQL (SQL) Optimization:<a href="#postgresql-sql-optimization" class="hash-link" aria-label="Direct link to PostgreSQL (SQL) Optimization:" title="Direct link to PostgreSQL (SQL) Optimization:">​</a></h4><ul><li>Indexing: Tạo index trên các cột thường được sử dụng trong mệnh đề WHERE, JOIN, ORDER BY.</li></ul><p>Ví dụ: <code>CREATE INDEX idx_users_email ON users (email);</code></p><p>Sử dụng <code>EXPLAIN ANALYZE &lt;câu lệnh SQL&gt;</code> để xem kế hoạch thực thi và xác định xem index có được sử dụng hay không, cũng như các điểm chậm khác.</p><p>Các loại index khác nhau: B-tree (mặc định, tốt cho =, &gt;, &lt;, BETWEEN, IN, LIKE prefix), Hash (chỉ tốt cho =), GiST, GIN (tốt cho full-text search, array, jsonb), BRIN (tốt cho dữ liệu lớn, có tương quan vật lý).</p><ul><li>Query Optimization:</li></ul><p>Viết truy vấn hiệu quả: Tránh SELECT <!-- -->*<!-- -->, chỉ chọn các cột cần thiết.</p><p>Sử dụng JOIN hiệu quả, đảm bảo có index trên các cột join.</p><p>Hạn chế sử dụng subquery hoặc CTE (Common Table Expressions) nếu có thể viết lại bằng JOIN.</p><p>Sử dụng LIMIT và OFFSET cẩn thận (offset lớn có thể chậm, cân nhắc keyset pagination).</p><ul><li><p>Connection Pooling: Sử dụng connection pool (như PgBouncer hoặc pool tích hợp trong framework) để tái sử dụng kết nối database, tránh chi phí tạo kết nối mới liên tục.</p></li><li><p>Database Tuning: Điều chỉnh các tham số cấu hình của PostgreSQL (trong postgresql.conf) như shared_buffers, work_mem, effective_cache_size dựa trên tài nguyên hệ thống.</p></li><li><p>Vacuuming &amp; Analyzing: Chạy VACUUM (để thu hồi không gian từ các hàng đã xóa/cập nhật) và ANALYZE (để cập nhật thống kê cho query planner) thường xuyên. Autovacuum thường được bật mặc định.</p></li><li><p>Partitioning: Chia các bảng lớn thành các partition nhỏ hơn dựa trên một key (ví dụ: theo ngày, theo vùng) để cải thiện hiệu năng quản lý và truy vấn.</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="mongodb-nosql-optimization">MongoDB (NoSQL) Optimization:<a href="#mongodb-nosql-optimization" class="hash-link" aria-label="Direct link to MongoDB (NoSQL) Optimization:" title="Direct link to MongoDB (NoSQL) Optimization:">​</a></h4><ul><li><p>Data Modeling: Đây là yếu tố quan trọng nhất. Thiết kế schema dựa trên cách ứng dụng truy cập dữ liệu (access patterns).</p><ul><li><p>Embedding (Nhúng): Nhúng các dữ liệu liên quan vào cùng một document nếu chúng thường xuyên được truy cập cùng nhau và mối quan hệ là &quot;one-to-few&quot;. Giảm thiểu số lượng truy vấn.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Ví dụ: Nhúng địa chỉ vào user document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Alice&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;addresses&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;street&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;123 Main St&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;city&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Anytown&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;street&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;456 Oak Ave&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;city&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Otherville&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Referencing (Tham chiếu): Sử dụng ID để tham chiếu đến document khác nếu mối quan hệ là &quot;one-to-many&quot; hoặc &quot;many-to-many&quot;, hoặc nếu dữ liệu được truy cập độc lập. Yêu cầu truy vấn $lookup (tương tự JOIN) hoặc nhiều truy vấn từ ứng dụng.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Ví dụ: Tham chiếu đến orders từ user document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// User document:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Bob&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Order documents:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">101</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;userId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;item&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Laptop&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">102</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;userId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;item&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mouse&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>Indexing: Tương tự SQL, tạo index trên các trường dùng để truy vấn, sắp xếp.</p><p>Ví dụ: <code>db.users.createIndex({ email: 1 }) (1: ascending, -1: descending)</code></p><ul><li><p>Compound Indexes: Tạo index trên nhiều trường: db.users.createIndex({ city: 1, signup_date: -1 }) (thứ tự trường quan trọng).</p></li><li><p>Sử dụng explain() để phân tích hiệu năng truy vấn: <code>db.users.find({ email: &quot;test@example.com&quot; }).explain(&quot;executionStats&quot;)</code>.</p></li><li><p>Đảm bảo index &quot;cover&quot; được truy vấn (covered query) nếu có thể - tức là index chứa đủ thông tin để trả lời truy vấn mà không cần đọc document thực tế.</p></li></ul></li><li><p>Sharding Strategy: Nếu sử dụng sharding, chọn shard key phù hợp để phân phối dữ liệu đều và tránh &quot;hot shards&quot; (shard bị quá tải).</p></li><li><p>Write Concerns &amp; Read Preferences: Cân bằng giữa consistency và performance. Mức concern cao hơn đảm bảo an toàn dữ liệu hơn nhưng có thể chậm hơn. Đọc từ secondary giảm tải cho primary nhưng có thể đọc dữ liệu cũ.</p></li><li><p>Projection: Chỉ lấy các trường cần thiết trong truy vấn: db.users.find({ city: &quot;Anytown&quot; }, { name: 1, email: 1, <!-- -->_<!-- -->id: 0 }).</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="acid-và-base">ACID và BASE<a href="#acid-và-base" class="hash-link" aria-label="Direct link to ACID và BASE" title="Direct link to ACID và BASE">​</a></h2><p>Đây là hai mô hình mô tả các thuộc tính giao dịch (transaction properties) của cơ sở dữ liệu.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="acid-atomicity-consistency-isolation-durability">ACID (Atomicity, Consistency, Isolation, Durability):<a href="#acid-atomicity-consistency-isolation-durability" class="hash-link" aria-label="Direct link to ACID (Atomicity, Consistency, Isolation, Durability):" title="Direct link to ACID (Atomicity, Consistency, Isolation, Durability):">​</a></h3><p>Mô hình truyền thống, thường gắn liền với RDBMS như PostgreSQL.</p><p><strong>A - Atomicity (Tính nguyên tử)</strong>: Một giao dịch (transaction) là một đơn vị công việc không thể chia cắt. Hoặc tất cả các thao tác trong giao dịch đều thành công (COMMIT), hoặc nếu có bất kỳ lỗi nào, tất cả các thay đổi sẽ bị hủy bỏ (ROLLBACK), đưa hệ thống về trạng thái trước khi giao dịch bắt đầu.</p><p>Ví dụ: Giao dịch chuyển tiền: Hoặc cả việc trừ tiền ở tài khoản A và cộng tiền ở tài khoản B đều xảy ra, hoặc không có gì xảy ra cả.</p><p><strong>C - Consistency (Tính nhất quán)</strong>: Đảm bảo rằng một giao dịch chỉ chuyển database từ một trạng thái hợp lệ này sang một trạng thái hợp lệ khác. Mọi ràng buộc dữ liệu (constraints) phải được thỏa mãn sau khi giao dịch kết thúc. Lưu ý: Chữ C này khác với C trong CAP Theorem, nó nói về tính nhất quán của dữ liệu theo các quy tắc nghiệp vụ/ràng buộc đã định nghĩa.</p><p>Ví dụ: Số dư tài khoản không thể âm (nếu có ràng buộc CHECK), tổng số tiền trong hệ thống không đổi sau giao dịch chuyển tiền.</p><p><strong>I - Isolation (Tính cô lập)</strong>: Đảm bảo rằng các giao dịch đồng thời không can thiệp lẫn nhau. Kết quả của việc thực thi nhiều giao dịch đồng thời phải giống như khi chúng được thực thi tuần tự theo một thứ tự nào đó. Các mức độ cô lập (Isolation Levels) khác nhau (Read Uncommitted, Read Committed, Repeatable Read, Serializable) cung cấp các mức độ bảo vệ khác nhau chống lại các hiện tượng như Dirty Read, Non-Repeatable Read, Phantom Read.</p><p>Ví dụ: Khi giao dịch chuyển tiền đang diễn ra, một giao dịch khác tính tổng số dư toàn bộ hệ thống sẽ không thấy trạng thái &quot;nửa vời&quot; (tiền đã trừ ở A nhưng chưa cộng vào B).</p><p><strong>D - Durability (Tính bền vững)</strong>: Một khi giao dịch đã được COMMIT thành công, các thay đổi của nó phải được lưu trữ vĩnh viễn và không bị mất ngay cả khi hệ thống gặp sự cố (mất điện, crash). Thường đạt được bằng cách ghi vào các bản ghi transaction log (Write-Ahead Logging - WAL) trước khi ghi vào file dữ liệu chính.</p><p>Ví dụ: Sau khi bạn nhận thông báo chuyển tiền thành công, số tiền đó phải ở trong tài khoản của bạn ngay cả khi server ngân hàng khởi động lại.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="base-basically-available-soft-state-eventually-consistent">BASE (Basically Available, Soft state, Eventually consistent):<a href="#base-basically-available-soft-state-eventually-consistent" class="hash-link" aria-label="Direct link to BASE (Basically Available, Soft state, Eventually consistent):" title="Direct link to BASE (Basically Available, Soft state, Eventually consistent):">​</a></h3><p>Mô hình thường thấy trong các hệ thống NoSQL phân tán, ưu tiên tính sẵn sàng hơn tính nhất quán mạnh mẽ.</p><p><strong>BA - Basically Available (Cơ bản là Sẵn sàng)</strong>: Hệ thống đảm bảo tính sẵn sàng (Availability theo nghĩa của CAP Theorem). Nó sẽ phản hồi mọi yêu cầu (dù có thể trả về dữ liệu cũ hoặc lỗi không nhất quán).</p><p>Ví dụ: Dù một node trong cụm Cassandra bị lỗi, các node khác vẫn cố gắng phục vụ yêu cầu đọc/ghi.</p><p><strong>S - Soft state (Trạng thái Mềm)</strong>: Trạng thái của hệ thống có thể thay đổi theo thời gian, ngay cả khi không có input mới, do tính nhất quán cuối cùng. Dữ liệu có thể &quot;tự&quot; cập nhật khi các bản sao đồng bộ với nhau.</p><p>Ví dụ: Bạn vừa cập nhật avatar, trạng thái avatar trên các server khác nhau đang trong quá trình &quot;mềm&quot; để tiến tới trạng thái mới nhất.</p><p><strong>E - Eventually consistent (Nhất quán Cuối cùng)</strong>: Như đã giải thích ở phần trước, hệ thống sẽ đạt đến trạng thái nhất quán sau một khoảng thời gian nếu không có thêm cập nhật nào.</p><p>Ví dụ: Sau vài giây/phút, avatar mới của bạn sẽ hiển thị đồng nhất trên tất cả các thiết bị và cho tất cả bạn bè.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/system-design/system-design-pattern"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">System Design Pattern</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/programming/nodejs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Node.js</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#core-concepts-các-khái-niệm-cốt-lõi" class="table-of-contents__link toc-highlight">Core concepts (Các khái niệm Cốt lõi)</a><ul><li><a href="#consistency-và-eventual-consistency" class="table-of-contents__link toc-highlight">Consistency và Eventual Consistency</a></li><li><a href="#scaling-khả-năng-mở-rộng" class="table-of-contents__link toc-highlight">Scaling (Khả năng Mở rộng)</a></li><li><a href="#performance-optimization-tối-ưu-hiệu-năng" class="table-of-contents__link toc-highlight">Performance Optimization (Tối ưu Hiệu năng)</a></li></ul></li><li><a href="#acid-và-base" class="table-of-contents__link toc-highlight">ACID và BASE</a><ul><li><a href="#acid-atomicity-consistency-isolation-durability" class="table-of-contents__link toc-highlight">ACID (Atomicity, Consistency, Isolation, Durability):</a></li><li><a href="#base-basically-available-soft-state-eventually-consistent" class="table-of-contents__link toc-highlight">BASE (Basically Available, Soft state, Eventually consistent):</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a class="footerLogoLink_BH7S" href="/"><img src="/img/icon.png" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="40" height="40"><img src="/img/icon.png" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="40" height="40"></a></div><div class="footer__copyright">Copyright © 2025 Quan Kori</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9e9ccc88.js"></script>
<script src="/assets/js/main.8db436b3.js"></script>
</body>
</html>